import{_ as N}from"./AppTextField-DBUgbd97.js";import{r as n,E as D,a0 as y,f as w,e as l,k as M,o as v,b as e,n as a,m as g,t as b,v as C,a3 as S,$ as T}from"./index-Cs56v0At.js";import{V,a as d}from"./VRow-CyomMdQL.js";import{V as x}from"./VCard-DA4IPDsH.js";import{V as k}from"./VCardText-DFV2BJbA.js";import{d as _}from"./VTextField-C4XJx2Dz.js";import{V as U}from"./VAlert-DdpZmKKI.js";import{V as $}from"./VForm-Dr6CSLn8.js";/* empty css              */import"./VAvatar-CilbXriq.js";import"./VImg-BZXzfXOW.js";import"./forwardRefs-DWGaNmQL.js";const K={__name:"profile",setup(A){M();const i=n(null),m=n(!1),r=n(""),p=n(""),t=n({newPassword:"",confirmPassword:""}),f=n(!1),c=n(!1);D(async()=>{const{data:{user:u},error:o}=await y.auth.getUser();if(o){r.value="Failed to load user data";return}i.value=u});const F=async()=>{if(r.value="",p.value="",t.value.newPassword!==t.value.confirmPassword){r.value="Passwords do not match.";return}if(t.value.newPassword.length<6){r.value="Password must be at least 6 characters long.";return}m.value=!0;try{const{error:u}=await y.auth.updateUser({password:t.value.newPassword});u?r.value=u.message:(p.value="Password updated successfully!",t.value.newPassword="",t.value.confirmPassword="")}catch{r.value="Failed to update password. Please try again."}m.value=!1};return(u,o)=>{const P=N;return v(),w(V,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(x,{title:"Account Details"},{default:l(()=>[e(k,null,{default:l(()=>[e(V,null,{default:l(()=>[e(d,{cols:"12",md:"6"},{default:l(()=>{var s;return[e(_,{"model-value":(s=a(i))==null?void 0:s.email,label:"Email",readonly:"",disabled:""},null,8,["model-value"])]}),_:1}),e(d,{cols:"12",md:"6"},{default:l(()=>{var s;return[e(_,{"model-value":(s=a(i))==null?void 0:s.id,label:"User ID",readonly:"",disabled:""},null,8,["model-value"])]}),_:1}),e(d,{cols:"12",md:"6"},{default:l(()=>{var s;return[e(_,{"model-value":(s=a(i))!=null&&s.created_at?new Date(a(i).created_at).toLocaleDateString():"",label:"Member Since",readonly:"",disabled:""},null,8,["model-value"])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(x,{title:"Change Password"},{default:l(()=>[e(k,null,{default:l(()=>[a(r)?(v(),w(U,{key:0,type:"error",class:"mb-4",variant:"tonal"},{default:l(()=>[b(C(a(r)),1)]),_:1})):g("",!0),a(p)?(v(),w(U,{key:1,type:"success",class:"mb-4",variant:"tonal"},{default:l(()=>[b(C(a(p)),1)]),_:1})):g("",!0),e($,{onSubmit:S(F,["prevent"])},{default:l(()=>[e(V,null,{default:l(()=>[e(d,{cols:"12",md:"6"},{default:l(()=>[e(P,{modelValue:a(t).newPassword,"onUpdate:modelValue":o[0]||(o[0]=s=>a(t).newPassword=s),label:"New Password",placeholder:"············",type:a(f)?"text":"password","append-inner-icon":a(f)?"tabler-eye-off":"tabler-eye","onClick:appendInner":o[1]||(o[1]=s=>f.value=!a(f))},null,8,["modelValue","type","append-inner-icon"])]),_:1}),e(d,{cols:"12",md:"6"},{default:l(()=>[e(P,{modelValue:a(t).confirmPassword,"onUpdate:modelValue":o[2]||(o[2]=s=>a(t).confirmPassword=s),label:"Confirm New Password",placeholder:"············",type:a(c)?"text":"password","append-inner-icon":a(c)?"tabler-eye-off":"tabler-eye","onClick:appendInner":o[3]||(o[3]=s=>c.value=!a(c))},null,8,["modelValue","type","append-inner-icon"])]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(T,{type:"submit",loading:a(m),disabled:a(m)},{default:l(()=>o[4]||(o[4]=[b(" Update Password ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{K as default};
