import{r as u,ao as T,E as $,c as U,o as y,d as f,f as j,m as I,b as a,e as t,$ as d,t as i,v as g,Z as C,a3 as O,a0 as V}from"./index-Cs56v0At.js";import{V as b,b as k,c as A}from"./VCard-DA4IPDsH.js";import{V as z}from"./VAlert-DdpZmKKI.js";import{V as L}from"./VDataTable-CE2rUsw4.js";import{V as F}from"./VCardText-DFV2BJbA.js";import{V as Z}from"./VForm-Dr6CSLn8.js";import{V as Q}from"./VTextarea-DSQ_Dxo0.js";import{V as D}from"./VSpacer-S0PcfrqZ.js";import{V as _}from"./VDialog-C5E9XUbD.js";import"./VAvatar-CilbXriq.js";import"./VImg-BZXzfXOW.js";import"./VSelect-BDhU9j2u.js";import"./VTextField-C4XJx2Dz.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-Bpo7c8Lz.js";import"./ssrBoot-BF_zi78u.js";import"./VDivider-CaB5QsUp.js";import"./VOverlay-CAZCCTm0.js";import"./scopeId-Ca3ivWDp.js";import"./VMenu-C8WYHHPj.js";import"./VChip-DMWyfkQi.js";/* empty css              */const G={class:"p-6"},H={class:"mb-8"},J={class:"text-xs text-gray-500"},ce={__name:"faqs",setup(K){const q=u([]),n=u(!1),r=u(""),m=u(!1),v=u(!1),p=u(!1),s=T({id:null,question:"",answer:""}),w=u(null),c=async()=>{n.value=!0,r.value="";const{data:l,error:e}=await V.from("faqs").select("*").order("created_at",{ascending:!1});e?r.value=e.message:q.value=l,n.value=!1},B=()=>{p.value=!1,Object.assign(s,{id:null,question:"",answer:""}),m.value=!0,r.value=""},E=l=>{p.value=!0,Object.assign(s,l),m.value=!0,r.value=""},x=async()=>{if(!s.question||!s.answer){r.value="Question and Answer are required";return}n.value=!0,r.value="";let l;p.value?l=await V.from("faqs").update({question:s.question,answer:s.answer}).eq("id",s.id).select():l=await V.from("faqs").insert([{question:s.question,answer:s.answer}]).select(),l.error?r.value=l.error.message:(m.value=!1,c()),n.value=!1},M=l=>{w.value=l,v.value=!0},N=async()=>{n.value=!0,r.value="";const{error:l}=await V.from("faqs").delete().eq("id",w.value);l&&(r.value=l.message),v.value=!1,c(),n.value=!1};return $(c),(l,e)=>(y(),U("div",G,[f("div",H,[a(b,{flat:"",class:"py-6 px-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-none border-b border-gray-200"},{default:t(()=>[e[7]||(e[7]=f("div",null,[f("h2",{class:"text-2xl font-bold mb-1"},"FAQs Management"),f("p",{class:"text-gray-500 text-base"}," Manage all frequently asked questions for your website. ")],-1)),a(d,{color:"primary",class:"mt-4 md:mt-0",onClick:B,size:"large","prepend-icon":"tabler-plus"},{default:t(()=>e[6]||(e[6]=[i(" Add FAQ ")])),_:1})]),_:1})]),r.value?(y(),j(z,{key:0,type:"error",class:"mb-4"},{default:t(()=>[i(g(r.value),1)]),_:1})):I("",!0),a(L,{items:q.value,loading:n.value,class:"rounded-lg shadow",headers:[{title:"Question",key:"question"},{title:"Actions",key:"actions",sortable:!1}],"item-value":"id",density:"comfortable"},{"item.created_at":t(({item:o})=>[f("span",J,g(new Date(o.created_at).toLocaleString()),1)]),"item.actions":t(({item:o})=>[a(d,{icon:"",variant:"text",color:"primary",onClick:S=>E(o)},{default:t(()=>[a(C,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(d,{icon:"",variant:"text",color:"error",onClick:S=>M(o.id)},{default:t(()=>[a(C,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),"no-data":t(()=>e[8]||(e[8]=[f("div",{class:"text-center text-gray-400 py-8"},"No data.",-1)])),_:1},8,["items","loading"]),a(_,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=o=>m.value=o),"max-width":"500"},{default:t(()=>[a(b,null,{default:t(()=>[a(k,null,{default:t(()=>[i(g(p.value?"Edit FAQ":"Add FAQ"),1)]),_:1}),a(F,null,{default:t(()=>[a(Z,{onSubmit:O(x,["prevent"])},{default:t(()=>[a(Q,{modelValue:s.question,"onUpdate:modelValue":e[0]||(e[0]=o=>s.question=o),label:"Question",required:"",class:"mb-4"},null,8,["modelValue"]),a(Q,{modelValue:s.answer,"onUpdate:modelValue":e[1]||(e[1]=o=>s.answer=o),label:"Answer",required:"",class:"mb-4"},null,8,["modelValue"])]),_:1})]),_:1}),a(A,null,{default:t(()=>[a(D),a(d,{text:"",onClick:e[2]||(e[2]=o=>m.value=!1)},{default:t(()=>e[9]||(e[9]=[i("Cancel")])),_:1}),a(d,{color:"primary",loading:n.value,onClick:x},{default:t(()=>e[10]||(e[10]=[i(" Save ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(_,{modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=o=>v.value=o),"max-width":"400"},{default:t(()=>[a(b,null,{default:t(()=>[a(k,null,{default:t(()=>e[11]||(e[11]=[i("Delete FAQ?")])),_:1}),a(F,null,{default:t(()=>e[12]||(e[12]=[i(" Are you sure you want to delete this FAQ? ")])),_:1}),a(A,null,{default:t(()=>[a(D),a(d,{text:"",onClick:e[4]||(e[4]=o=>v.value=!1)},{default:t(()=>e[13]||(e[13]=[i("Cancel")])),_:1}),a(d,{color:"error",loading:n.value,onClick:N},{default:t(()=>e[14]||(e[14]=[i(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{ce as default};
