import{a6 as ie,a7 as se,a8 as E,aP as ne,r as p,aQ as re,W as R,a9 as de,aa as ue,aR as ce,b as t,p as $,F as J,at as me,aS as fe,Y as q,aT as ve,aU as pe,aF as ke,D as Ve,c as M,o as A,d as f,e as l,s as r,f as be,l as ge,Z as k,t as g,a1 as ye}from"./index-qeOE-RZf.js";import{s as h}from"./supabase-530oTR8b.js";import{V as j}from"./VAlert-3engY8ay.js";import{V as N,b as O,c as W}from"./VCard-DSA5d7tx.js";import{V as Ce}from"./VChip-D0U8pgGv.js";import{a as Q,m as xe,V as _e}from"./VDataTable-DIwuVEqw.js";import{V as Y}from"./VCardText-esC-nFTL.js";import{V as we}from"./VForm-D3l-Nezn.js";import{u as Se,a as Z,m as Fe,b as L}from"./VTextField-l-OaS9z9.js";import{V as Ae}from"./VTextarea-C_xe0QJ6.js";import{V as G}from"./VSpacer-_ceUCEQo.js";import{V as H}from"./VDialog-BTxMSAHY.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-CrC7-P1Q.js";import"./VImg-BuNpeMJc.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-dtqFoHiT.js";import"./ssrBoot-DzfblIhC.js";import"./VDivider-PwI-pKnj.js";import"./VOverlay-CG-9_lFx.js";import"./scopeId-Caf1NDu8.js";import"./lazy-DvqCi__j.js";import"./VMenu-BUbR1i_z.js";/* empty css              */const he=se({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Fe(),...xe()},"VSwitch"),De=ie()({name:"VSwitch",inheritAttrs:!1,props:he(),emits:{"update:focused":i=>!0,"update:modelValue":i=>!0,"update:indeterminate":i=>!0},setup(i,d){let{attrs:u,slots:n}=d;const c=E(i,"indeterminate"),m=E(i,"modelValue"),{loaderClasses:V}=ne(i),{isFocused:o,focus:x,blur:y}=Se(i),_=p(),w=re&&window.matchMedia("(forced-colors: active)").matches,S=R(()=>typeof i.loading=="string"&&i.loading!==""?i.loading:i.color),D=de(),P=R(()=>i.id||`switch-${D}`);function s(){c.value&&(c.value=!1)}function e(a){var b,F;a.stopPropagation(),a.preventDefault(),(F=(b=_.value)==null?void 0:b.input)==null||F.click()}return ue(()=>{const[a,b]=ce(u),F=Z.filterProps(i),K=Q.filterProps(i);return t(Z,$({class:["v-switch",{"v-switch--flat":i.flat},{"v-switch--inset":i.inset},{"v-switch--indeterminate":c.value},V.value,i.class]},a,F,{modelValue:m.value,"onUpdate:modelValue":T=>m.value=T,id:P.value,focused:o.value,style:i.style}),{...n,default:T=>{let{id:X,messagesId:ee,isDisabled:te,isReadonly:ae,isValid:z}=T;const U={model:m,isValid:z};return t(Q,$({ref:_},K,{modelValue:m.value,"onUpdate:modelValue":[C=>m.value=C,s],id:X.value,"aria-describedby":ee.value,type:"checkbox","aria-checked":c.value?"mixed":void 0,disabled:te.value,readonly:ae.value,onFocus:x,onBlur:y},b),{...n,default:C=>{let{backgroundColorClasses:B,backgroundColorStyles:v}=C;return t("div",{class:["v-switch__track",w?void 0:B.value],style:v.value,onClick:e},[n["track-true"]&&t("div",{key:"prepend",class:"v-switch__track-true"},[n["track-true"](U)]),n["track-false"]&&t("div",{key:"append",class:"v-switch__track-false"},[n["track-false"](U)])])},input:C=>{let{inputNode:B,icon:v,backgroundColorClasses:le,backgroundColorStyles:oe}=C;return t(J,null,[B,t("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":v||i.loading},i.inset||w?void 0:le.value],style:i.inset?void 0:oe.value},[n.thumb?t(me,{defaults:{VIcon:{icon:v,size:"x-small"}}},{default:()=>[n.thumb({...U,icon:v})]}):t(fe,null,{default:()=>[i.loading?t(ve,{name:"v-switch",active:!0,color:z.value===!1?void 0:S.value},{default:I=>n.loader?n.loader(I):t(pe,{active:I.isActive,color:I.color,indeterminate:!0,size:"16",width:"2"},null)}):v&&t(q,{key:String(v),icon:v,size:"x-small"},null)]})])])}})}})}),{}}}),Pe={class:"p-6"},Te={class:"mb-8"},Ue={key:0,class:"material-icons"},Be={key:1,class:"text-gray-400"},Ie=["href"],Me={class:"text-xs text-gray-500"},st={__name:"forms",setup(i){const d=p(!1),u=p(""),n=p([]),c=p(!1),m=p(!1),V=p(!1),o=ke({id:null,icon:"",title:"",link:"",description:"",is_active:!0}),x=p(null),y=async()=>{d.value=!0,u.value="";const{data:s,error:e}=await h.from("forms").select("*").order("created_at",{ascending:!1});e?u.value=e.message:n.value=s,d.value=!1},_=()=>{V.value=!1,Object.assign(o,{id:null,icon:"",title:"",link:"",description:"",is_active:!0}),c.value=!0},w=s=>{V.value=!0,Object.assign(o,s),c.value=!0},S=async()=>{if(!o.title||!o.link){u.value="Title and Link are required";return}d.value=!0,u.value="";let s;V.value?s=await h.from("forms").update({icon:o.icon,title:o.title,link:o.link,description:o.description,is_active:o.is_active}).eq("id",o.id).select():s=await h.from("forms").insert([{icon:o.icon,title:o.title,link:o.link,description:o.description,is_active:o.is_active}]).select(),s.error?u.value=s.error.message:(c.value=!1,y()),d.value=!1},D=s=>{x.value=s,m.value=!0},P=async()=>{d.value=!0,u.value="";const{error:s}=await h.from("forms").delete().eq("id",x.value);s&&(u.value=s.message),m.value=!1,y(),d.value=!1};return Ve(y),(s,e)=>(A(),M(J,null,[t(j,{type:"info",class:"mb-4",variant:"tonal"},{default:l(()=>e[9]||(e[9]=[r(" Untuk memilih ikon, silakan cek daftar nama ikon di "),f("a",{href:"https://tabler.io/icons",target:"_blank",class:"text-primary font-semibold underline"}," https://tabler.io/icons",-1),r(" dan gunakan nama ikon (misal: "),f("code",null,"tabler-user",-1),r("). ")])),_:1}),f("div",Pe,[f("div",Te,[t(N,{flat:"",class:"py-6 px-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-none border-b border-gray-200"},{default:l(()=>[e[11]||(e[11]=f("div",null,[f("h2",{class:"text-2xl font-bold mb-1"},"Forms Management"),f("p",{class:"text-gray-500 text-base"}," Manage all forms and their visibility on your website. ")],-1)),t(k,{color:"primary",class:"mt-4 md:mt-0",onClick:_,size:"large","prepend-icon":"tabler-plus"},{default:l(()=>e[10]||(e[10]=[r(" Add Form ")])),_:1})]),_:1})]),u.value?(A(),be(j,{key:0,type:"error",class:"mb-4"},{default:l(()=>[r(g(u.value),1)]),_:1})):ge("",!0),t(_e,{items:n.value,loading:d.value,class:"rounded-lg shadow",headers:[{title:"Icon",key:"icon"},{title:"Title",key:"title"},{title:"Link",key:"link"},{title:"Description",key:"description"},{title:"Active",key:"is_active"},{title:"Created",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],"item-value":"id",density:"comfortable"},{"item.icon":l(({item:a})=>[a.icon?(A(),M("span",Ue,g(a.icon),1)):(A(),M("span",Be,"-"))]),"item.link":l(({item:a})=>[f("a",{href:a.link,target:"_blank",class:"text-primary underline break-all"},g(a.link),9,Ie)]),"item.is_active":l(({item:a})=>[t(Ce,{color:a.is_active?"success":"error",size:"small"},{default:l(()=>[r(g(a.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),"item.created_at":l(({item:a})=>[f("span",Me,g(new Date(a.created_at).toLocaleString()),1)]),"item.actions":l(({item:a})=>[t(k,{icon:"",variant:"text",color:"primary",onClick:b=>w(a)},{default:l(()=>[t(q,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(k,{icon:"",variant:"text",color:"error",onClick:b=>D(a.id)},{default:l(()=>[t(q,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),"no-data":l(()=>e[12]||(e[12]=[f("div",{class:"text-center text-gray-400 py-8"},"No data.",-1)])),_:1},8,["items","loading"]),t(H,{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=a=>c.value=a),"max-width":"500"},{default:l(()=>[t(N,null,{default:l(()=>[t(O,null,{default:l(()=>[r(g(V.value?"Edit Form":"Add Form"),1)]),_:1}),t(Y,null,{default:l(()=>[t(we,{onSubmit:ye(S,["prevent"])},{default:l(()=>[t(L,{modelValue:o.icon,"onUpdate:modelValue":e[0]||(e[0]=a=>o.icon=a),label:"Material Icon Name",class:"mb-4"},null,8,["modelValue"]),t(L,{modelValue:o.title,"onUpdate:modelValue":e[1]||(e[1]=a=>o.title=a),label:"Title",required:"",class:"mb-4"},null,8,["modelValue"]),t(L,{modelValue:o.link,"onUpdate:modelValue":e[2]||(e[2]=a=>o.link=a),label:"Link",required:"",class:"mb-4"},null,8,["modelValue"]),t(Ae,{modelValue:o.description,"onUpdate:modelValue":e[3]||(e[3]=a=>o.description=a),label:"Description",class:"mb-4"},null,8,["modelValue"]),t(De,{modelValue:o.is_active,"onUpdate:modelValue":e[4]||(e[4]=a=>o.is_active=a),label:"Active",class:"mb-4"},null,8,["modelValue"])]),_:1})]),_:1}),t(W,null,{default:l(()=>[t(G),t(k,{text:"",onClick:e[5]||(e[5]=a=>c.value=!1)},{default:l(()=>e[13]||(e[13]=[r("Cancel")])),_:1}),t(k,{color:"primary",loading:d.value,onClick:S},{default:l(()=>e[14]||(e[14]=[r(" Save ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(H,{modelValue:m.value,"onUpdate:modelValue":e[8]||(e[8]=a=>m.value=a),"max-width":"400"},{default:l(()=>[t(N,null,{default:l(()=>[t(O,null,{default:l(()=>e[15]||(e[15]=[r("Delete Form?")])),_:1}),t(Y,null,{default:l(()=>e[16]||(e[16]=[r(" Are you sure you want to delete this form? ")])),_:1}),t(W,null,{default:l(()=>[t(G),t(k,{text:"",onClick:e[7]||(e[7]=a=>m.value=!1)},{default:l(()=>e[17]||(e[17]=[r("Cancel")])),_:1}),t(k,{color:"error",loading:d.value,onClick:P},{default:l(()=>e[18]||(e[18]=[r(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};export{st as default};
