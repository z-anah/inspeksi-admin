import{_ as b}from"./AppTextField-AXQiKUyI.js";import{r as m,j as x,c as y,o as c,d as i,b as e,m as a,E as h,e as o,f as C,l as k,s as g,t as I,a1 as B,Z as N,F as S}from"./index-hJoZ10xC.js";import{s as F}from"./supabase-Cx3jqyjq.js";import{V as j}from"./VNodeRenderer-C-AmLo5i.js";import{a as p,V}from"./VRow-7PoLFZLN.js";import{V as P}from"./VCard-t7c1hBMb.js";import{V as v}from"./VCardText-DP9GEjz-.js";import{V as R}from"./VAlert-Br_nhDBq.js";import{V as T}from"./VForm-B4qOMbnl.js";import"./VTextField-DqmsUdQy.js";import"./VImg-Be6WiOd7.js";import"./forwardRefs-DWGaNmQL.js";import"./_commonjsHelpers-BosuxZz1.js";/* empty css              */import"./VAvatar-vdd2hSY_.js";const U={href:"javascript:void(0)"},A={class:"auth-logo d-flex align-center gap-x-3"},Y={__name:"login",setup(E){const t=m({username:"",password:"",remember:!1}),n=m(!1),r=m(!1),l=m(""),_=x(),w=async()=>{l.value="",r.value=!0;try{const{data:u,error:s}=await F.from("users").select("id, username, password").eq("username",t.value.username).single();if(s||!u){l.value="Invalid username or password.",r.value=!1;return}if(t.value.password!==u.password){l.value="Invalid username or password.",r.value=!1;return}localStorage.setItem("is_signed","true"),localStorage.setItem("user_name",t.value.username),console.log(localStorage.getItem("user_name")),_.push("/pages")}catch{l.value="Login failed. Please try again."}r.value=!1};return(u,s)=>{const f=b;return c(),y(S,null,[i("a",U,[i("div",A,[e(a(j),{nodes:a(h).app.logo},null,8,["nodes"])])]),e(V,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:o(()=>[e(p,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:o(()=>[e(P,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-6",width:"calc(100% - 48px)"},{default:o(()=>[e(v,null,{default:o(()=>s[3]||(s[3]=[i("h4",{class:"text-h4 mb-1"}," Welcome!  ",-1)])),_:1}),e(v,null,{default:o(()=>[a(l)?(c(),C(R,{key:0,type:"error",class:"mb-4",variant:"tonal"},{default:o(()=>[g(I(a(l)),1)]),_:1})):k("",!0),e(T,{onSubmit:B(w,["prevent"])},{default:o(()=>[e(V,null,{default:o(()=>[e(p,{cols:"12"},{default:o(()=>[e(f,{modelValue:a(t).username,"onUpdate:modelValue":s[0]||(s[0]=d=>a(t).username=d),autofocus:"",label:"Username",type:"text",placeholder:"yourusername"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(f,{modelValue:a(t).password,"onUpdate:modelValue":s[1]||(s[1]=d=>a(t).password=d),label:"Password",placeholder:"路路路路路路路路路路路路",type:a(n)?"text":"password",autocomplete:"password","append-inner-icon":a(n)?"tabler-eye-off":"tabler-eye","onClick:appendInner":s[2]||(s[2]=d=>n.value=!a(n))},null,8,["modelValue","type","append-inner-icon"]),e(N,{block:"",type:"submit",loading:a(r),disabled:a(r),class:"mt-6"},{default:o(()=>s[4]||(s[4]=[g(" Login ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{Y as default};
