import{r as u,am as E,D as U,c as $,o as y,d as f,f as j,l as I,b as a,e as t,Z as d,s as i,t as g,Y as C,a1 as O}from"./index-DlJANnYd.js";import{s as V}from"./supabase-BzEWn3Nz.js";import{V as b,b as k,c as A}from"./VCard-D_fsEcSS.js";import{V as z}from"./VAlert-D6AfPq5Y.js";import{V as L}from"./VDataTable-CHvIH-ym.js";import{V as F}from"./VCardText-BPQfIJ-x.js";import{V as Y}from"./VForm-CZCxUfyJ.js";import{V as D}from"./VTextarea-DUXMXu2G.js";import{V as Q}from"./VSpacer-C3GwWcfp.js";import{V as _}from"./VDialog-QTYNSIq0.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-BGAsHGGR.js";import"./VImg-qd_ukxwb.js";import"./VSelect-C2nzsyO2.js";import"./VTextField-DDrVlWqV.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-DRd2BzU_.js";import"./ssrBoot-C6lHLCQi.js";import"./VDivider-BAYtfDNH.js";import"./VOverlay-BJHMKcQj.js";import"./scopeId-RLq0CsSn.js";import"./VMenu-BQlFYYWv.js";import"./VChip-CgJgXsye.js";/* empty css              */const Z={class:"p-6"},G={class:"mb-8"},H={class:"text-xs text-gray-500"},be={__name:"faqs",setup(J){const q=u([]),n=u(!1),r=u(""),m=u(!1),p=u(!1),v=u(!1),s=E({id:null,question:"",answer:""}),w=u(null),c=async()=>{n.value=!0,r.value="";const{data:l,error:e}=await V.from("faqs").select("*").order("created_at",{ascending:!1});e?r.value=e.message:q.value=l,n.value=!1},B=()=>{v.value=!1,Object.assign(s,{id:null,question:"",answer:""}),m.value=!0,r.value=""},M=l=>{v.value=!0,Object.assign(s,l),m.value=!0,r.value=""},x=async()=>{if(!s.question||!s.answer){r.value="Question and Answer are required";return}n.value=!0,r.value="";let l;v.value?l=await V.from("faqs").update({question:s.question,answer:s.answer}).eq("id",s.id).select():l=await V.from("faqs").insert([{question:s.question,answer:s.answer}]).select(),l.error?r.value=l.error.message:(m.value=!1,c()),n.value=!1},N=l=>{w.value=l,p.value=!0},S=async()=>{n.value=!0,r.value="";const{error:l}=await V.from("faqs").delete().eq("id",w.value);l&&(r.value=l.message),p.value=!1,c(),n.value=!1};return U(c),(l,e)=>(y(),$("div",Z,[f("div",G,[a(b,{flat:"",class:"py-6 px-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-none border-b border-gray-200"},{default:t(()=>[e[7]||(e[7]=f("div",null,[f("h2",{class:"text-2xl font-bold mb-1"},"FAQs Management"),f("p",{class:"text-gray-500 text-base"}," Manage all frequently asked questions for your website. ")],-1)),a(d,{color:"primary",class:"mt-4 md:mt-0",onClick:B,size:"large","prepend-icon":"tabler-plus"},{default:t(()=>e[6]||(e[6]=[i(" Add FAQ ")])),_:1})]),_:1})]),r.value?(y(),j(z,{key:0,type:"error",class:"mb-4"},{default:t(()=>[i(g(r.value),1)]),_:1})):I("",!0),a(L,{items:q.value,loading:n.value,class:"rounded-lg shadow",headers:[{title:"Question",key:"question"},{title:"Actions",key:"actions",sortable:!1}],"item-value":"id",density:"comfortable"},{"item.created_at":t(({item:o})=>[f("span",H,g(new Date(o.created_at).toLocaleString()),1)]),"item.actions":t(({item:o})=>[a(d,{icon:"",variant:"text",color:"primary",onClick:T=>M(o)},{default:t(()=>[a(C,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(d,{icon:"",variant:"text",color:"error",onClick:T=>N(o.id)},{default:t(()=>[a(C,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),"no-data":t(()=>e[8]||(e[8]=[f("div",{class:"text-center text-gray-400 py-8"},"No data.",-1)])),_:1},8,["items","loading"]),a(_,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=o=>m.value=o),"max-width":"500"},{default:t(()=>[a(b,null,{default:t(()=>[a(k,null,{default:t(()=>[i(g(v.value?"Edit FAQ":"Add FAQ"),1)]),_:1}),a(F,null,{default:t(()=>[a(Y,{onSubmit:O(x,["prevent"])},{default:t(()=>[a(D,{modelValue:s.question,"onUpdate:modelValue":e[0]||(e[0]=o=>s.question=o),label:"Question",required:"",class:"mb-4"},null,8,["modelValue"]),a(D,{modelValue:s.answer,"onUpdate:modelValue":e[1]||(e[1]=o=>s.answer=o),label:"Answer",required:"",class:"mb-4"},null,8,["modelValue"])]),_:1})]),_:1}),a(A,null,{default:t(()=>[a(Q),a(d,{text:"",onClick:e[2]||(e[2]=o=>m.value=!1)},{default:t(()=>e[9]||(e[9]=[i("Cancel")])),_:1}),a(d,{color:"primary",loading:n.value,onClick:x},{default:t(()=>e[10]||(e[10]=[i(" Save ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(_,{modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=o=>p.value=o),"max-width":"400"},{default:t(()=>[a(b,null,{default:t(()=>[a(k,null,{default:t(()=>e[11]||(e[11]=[i("Delete FAQ?")])),_:1}),a(F,null,{default:t(()=>e[12]||(e[12]=[i(" Are you sure you want to delete this FAQ? ")])),_:1}),a(A,null,{default:t(()=>[a(Q),a(d,{text:"",onClick:e[4]||(e[4]=o=>p.value=!1)},{default:t(()=>e[13]||(e[13]=[i("Cancel")])),_:1}),a(d,{color:"error",loading:n.value,onClick:S},{default:t(()=>e[14]||(e[14]=[i(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{be as default};
