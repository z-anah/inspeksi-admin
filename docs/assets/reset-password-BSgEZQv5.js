import{_ as R}from"./AppTextField-DBUgbd97.js";import{r as l,k as N,a as B,c as F,o as w,d as i,b as a,n as e,G as T,e as t,f as g,m as b,t as v,v as y,a3 as $,$ as j,Z as I,F as M,a0 as U}from"./index-Cs56v0At.js";import{V as A}from"./VNodeRenderer-DRZ_MKLn.js";import{a as c,V as _}from"./VRow-CyomMdQL.js";import{V as E}from"./VCard-DA4IPDsH.js";import{V as x}from"./VCardText-DFV2BJbA.js";import{V as P}from"./VAlert-DdpZmKKI.js";import{V as L}from"./VForm-Dr6CSLn8.js";import"./VTextField-C4XJx2Dz.js";import"./VImg-BZXzfXOW.js";import"./forwardRefs-DWGaNmQL.js";/* empty css              */import"./VAvatar-CilbXriq.js";const S={href:"javascript:void(0)"},D={class:"auth-logo d-flex align-center gap-x-3"},se={__name:"reset-password",setup(G){const o=l({password:"",confirmPassword:""}),u=l(!1),p=l(!1),n=l(!1),r=l(""),m=l(""),k=N(),C=async()=>{if(r.value="",m.value="",o.value.password!==o.value.confirmPassword){r.value="Passwords do not match.";return}if(o.value.password.length<6){r.value="Password must be at least 6 characters long.";return}n.value=!0;try{const{error:f}=await U.auth.updateUser({password:o.value.password});if(f){r.value=f.message,n.value=!1;return}m.value="Password updated successfully! Redirecting to login...",setTimeout(()=>{k.push({name:"login"})},2e3)}catch{r.value="Failed to update password. Please try again."}n.value=!1};return(f,s)=>{const V=R,h=B("RouterLink");return w(),F(M,null,[i("a",S,[i("div",D,[a(e(A),{nodes:e(T).app.logo},null,8,["nodes"])])]),a(_,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:t(()=>[a(c,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:t(()=>[a(E,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-6",width:"calc(100% - 48px)"},{default:t(()=>[a(x,null,{default:t(()=>s[4]||(s[4]=[i("h4",{class:"text-h4 mb-1"}," Reset Password  ",-1),i("p",{class:"mb-0"}," Enter your new password ",-1)])),_:1}),a(x,null,{default:t(()=>[e(r)?(w(),g(P,{key:0,type:"error",class:"mb-4",variant:"tonal"},{default:t(()=>[v(y(e(r)),1)]),_:1})):b("",!0),e(m)?(w(),g(P,{key:1,type:"success",class:"mb-4",variant:"tonal"},{default:t(()=>[v(y(e(m)),1)]),_:1})):b("",!0),a(L,{onSubmit:$(C,["prevent"])},{default:t(()=>[a(_,null,{default:t(()=>[a(c,{cols:"12"},{default:t(()=>[a(V,{modelValue:e(o).password,"onUpdate:modelValue":s[0]||(s[0]=d=>e(o).password=d),autofocus:"",label:"New Password",placeholder:"路路路路路路路路路路路路",type:e(u)?"text":"password","append-inner-icon":e(u)?"tabler-eye-off":"tabler-eye","onClick:appendInner":s[1]||(s[1]=d=>u.value=!e(u))},null,8,["modelValue","type","append-inner-icon"])]),_:1}),a(c,{cols:"12"},{default:t(()=>[a(V,{modelValue:e(o).confirmPassword,"onUpdate:modelValue":s[2]||(s[2]=d=>e(o).confirmPassword=d),label:"Confirm New Password",placeholder:"路路路路路路路路路路路路",type:e(p)?"text":"password","append-inner-icon":e(p)?"tabler-eye-off":"tabler-eye","onClick:appendInner":s[3]||(s[3]=d=>p.value=!e(p))},null,8,["modelValue","type","append-inner-icon"]),a(j,{block:"",type:"submit",loading:e(n),disabled:e(n),class:"mt-6"},{default:t(()=>s[5]||(s[5]=[v(" Reset Password ")])),_:1},8,["loading","disabled"])]),_:1}),a(c,{cols:"12",class:"d-flex align-center justify-center"},{default:t(()=>[a(h,{class:"text-primary d-flex align-center",to:{name:"login"}},{default:t(()=>[a(I,{icon:"tabler-chevron-left",class:"flip-in-rtl"}),s[6]||(s[6]=i("span",null,"Back to login",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{se as default};
