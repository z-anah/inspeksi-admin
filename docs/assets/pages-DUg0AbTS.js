import{r as u,aF as $,D as j,c as F,o as C,d as f,f as I,l as K,b as t,e as l,Z as d,s as i,t as y,Y as w,a1 as O}from"./index-qeOE-RZf.js";import{s as c}from"./supabase-530oTR8b.js";import{V as g,b as D,c as S}from"./VCard-DSA5d7tx.js";import{V as L}from"./VAlert-3engY8ay.js";import{V as z}from"./VDataTable-DIwuVEqw.js";import{V as _}from"./VCardText-esC-nFTL.js";import{V as Y}from"./VForm-D3l-Nezn.js";import{b as A}from"./VTextField-l-OaS9z9.js";import{V as Z}from"./VTextarea-C_xe0QJ6.js";import{V as T}from"./VSpacer-_ceUCEQo.js";import{V as U}from"./VDialog-BTxMSAHY.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-CrC7-P1Q.js";import"./VImg-BuNpeMJc.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-dtqFoHiT.js";import"./ssrBoot-DzfblIhC.js";import"./VDivider-PwI-pKnj.js";import"./VOverlay-CG-9_lFx.js";import"./scopeId-Caf1NDu8.js";import"./lazy-DvqCi__j.js";import"./VMenu-BUbR1i_z.js";import"./VChip-D0U8pgGv.js";/* empty css              */const G={class:"p-6"},H={class:"mb-8"},J={class:"text-xs text-gray-500"},be={__name:"pages",setup(P){const s=u(!1),r=u(""),b=u([]),m=u(!1),p=u(!1),v=u(!1),a=$({id:null,section:"",key:"",value:""}),k=u(null),V=async()=>{s.value=!0,r.value="";const{data:n,error:e}=await c.from("content").select("*").order("updated_at",{ascending:!1});e?r.value=e.message:b.value=n,s.value=!1},q=()=>{v.value=!1,Object.assign(a,{id:null,section:"",key:"",value:""}),m.value=!0},B=n=>{v.value=!0,Object.assign(a,n),m.value=!0},x=async()=>{if(!a.section||!a.key){r.value="Section and Key are required";return}s.value=!0,r.value="";let n;v.value?n=await c.from("content").update({section:a.section,key:a.key,value:a.value,updated_at:new Date().toISOString()}).eq("id",a.id).select():n=await c.from("content").insert([{section:a.section,key:a.key,value:a.value}]).select(),n.error?r.value=n.error.message:(m.value=!1,V()),s.value=!1},M=n=>{k.value=n,p.value=!0},N=async()=>{s.value=!0,r.value="";const{error:n}=await c.from("content").delete().eq("id",k.value);n&&(r.value=n.message),p.value=!1,V(),s.value=!1};return j(V),(n,e)=>(C(),F("div",G,[f("div",H,[t(g,{flat:"",class:"py-6 px-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-none border-b border-gray-200"},{default:l(()=>[e[8]||(e[8]=f("div",null,[f("h2",{class:"text-2xl font-bold mb-1"},"Content Management"),f("p",{class:"text-gray-500 text-base"}," Manage all dynamic content for each section of your website. ")],-1)),t(d,{color:"primary",class:"mt-4 md:mt-0",onClick:q,size:"large","prepend-icon":"tabler-plus"},{default:l(()=>e[7]||(e[7]=[i(" Add Content ")])),_:1})]),_:1})]),r.value?(C(),I(L,{key:0,type:"error",class:"mb-4"},{default:l(()=>[i(y(r.value),1)]),_:1})):K("",!0),t(z,{items:b.value,loading:s.value,class:"rounded-lg shadow",headers:[{title:"Section",key:"section"},{title:"Key",key:"key"},{title:"Value",key:"value"},{title:"Updated",key:"updated_at"},{title:"Actions",key:"actions",sortable:!1}],"item-value":"id",density:"comfortable"},{"item.updated_at":l(({item:o})=>[f("span",J,y(new Date(o.updated_at).toLocaleString()),1)]),"item.actions":l(({item:o})=>[t(d,{icon:"",variant:"text",color:"primary",onClick:E=>B(o)},{default:l(()=>[t(w,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(d,{icon:"",variant:"text",color:"error",onClick:E=>M(o.id)},{default:l(()=>[t(w,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),"no-data":l(()=>e[9]||(e[9]=[f("div",{class:"text-center text-gray-400 py-8"},"No data.",-1)])),_:1},8,["items","loading"]),t(U,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=o=>m.value=o),"max-width":"500"},{default:l(()=>[t(g,null,{default:l(()=>[t(D,null,{default:l(()=>[i(y(v.value?"Edit Content":"Add Content"),1)]),_:1}),t(_,null,{default:l(()=>[t(Y,{onSubmit:O(x,["prevent"])},{default:l(()=>[t(A,{modelValue:a.section,"onUpdate:modelValue":e[0]||(e[0]=o=>a.section=o),label:"Section",required:"",class:"mb-4"},null,8,["modelValue"]),t(A,{modelValue:a.key,"onUpdate:modelValue":e[1]||(e[1]=o=>a.key=o),label:"Key",required:"",class:"mb-4"},null,8,["modelValue"]),t(Z,{modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value=o),label:"Value",rows:"3",class:"mb-4"},null,8,["modelValue"])]),_:1})]),_:1}),t(S,null,{default:l(()=>[t(T),t(d,{text:"",onClick:e[3]||(e[3]=o=>m.value=!1)},{default:l(()=>e[10]||(e[10]=[i("Cancel")])),_:1}),t(d,{color:"primary",loading:s.value,onClick:x},{default:l(()=>e[11]||(e[11]=[i(" Save ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=o=>p.value=o),"max-width":"400"},{default:l(()=>[t(g,null,{default:l(()=>[t(D,null,{default:l(()=>e[12]||(e[12]=[i("Delete Content?")])),_:1}),t(_,null,{default:l(()=>e[13]||(e[13]=[i(" Are you sure you want to delete this content? ")])),_:1}),t(S,null,{default:l(()=>[t(T),t(d,{text:"",onClick:e[5]||(e[5]=o=>p.value=!1)},{default:l(()=>e[14]||(e[14]=[i("Cancel")])),_:1}),t(d,{color:"error",loading:s.value,onClick:N},{default:l(()=>e[15]||(e[15]=[i(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{be as default};
