import{r as u,am as E,D as U,c as $,o as y,d as f,f as j,l as I,b as t,e as a,Z as d,s as i,t as g,Y as C,a1 as O}from"./index-hJoZ10xC.js";import{s as V}from"./supabase-Cx3jqyjq.js";import{V as w,b as k,c as A}from"./VCard-t7c1hBMb.js";import{V as z}from"./VAlert-Br_nhDBq.js";import{V as L}from"./VDataTable-By6ODQQe.js";import{V as F}from"./VCardText-DP9GEjz-.js";import{V as Y}from"./VForm-B4qOMbnl.js";import{V as D}from"./VTextarea-Dh-5JDt1.js";import{V as Q}from"./VSpacer-C1jw25IK.js";import{V as _}from"./VDialog-B-joYMac.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-vdd2hSY_.js";import"./VImg-Be6WiOd7.js";import"./VSelect-BXY4Zik-.js";import"./VTextField-DqmsUdQy.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-C8Kl8a6C.js";import"./ssrBoot-BYfT7MCo.js";import"./VDivider-SO9d5dLn.js";import"./VOverlay-D3cjHvs0.js";import"./scopeId-CD6h5bM2.js";import"./VMenu-BHDLKHdv.js";import"./VChip-BZlecNgM.js";/* empty css              */const Z={class:"p-6"},G={class:"mb-8"},H={class:"text-xs text-gray-500"},we={__name:"faqs",setup(J){const b=u([]),n=u(!1),r=u(""),m=u(!1),p=u(!1),v=u(!1),s=E({id:null,question:"",answer:""}),q=u(null),c=async()=>{n.value=!0,r.value="";const{data:l,error:e}=await V.from("faqs").select("*").order("created_at",{ascending:!1});e?r.value=e.message:b.value=l,n.value=!1},B=()=>{v.value=!1,Object.assign(s,{id:null,question:"",answer:""}),m.value=!0,r.value=""},M=l=>{v.value=!0,Object.assign(s,l),m.value=!0,r.value=""},x=async()=>{if(!s.question||!s.answer){r.value="Question and Answer are required";return}n.value=!0,r.value="";let l;v.value?l=await V.from("faqs").update({question:s.question,answer:s.answer}).eq("id",s.id).select():l=await V.from("faqs").insert([{question:s.question,answer:s.answer}]).select(),l.error?r.value=l.error.message:(m.value=!1,c()),n.value=!1},N=l=>{q.value=l,p.value=!0},S=async()=>{n.value=!0,r.value="";const{error:l}=await V.from("faqs").delete().eq("id",q.value);l&&(r.value=l.message),p.value=!1,c(),n.value=!1};return U(c),(l,e)=>(y(),$("div",Z,[f("div",G,[t(w,{flat:"",class:"py-6 px-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-none border-b border-gray-200"},{default:a(()=>[e[7]||(e[7]=f("div",null,[f("h2",{class:"text-2xl font-bold mb-1"},"FAQs Management"),f("p",{class:"text-gray-500 text-base"}," Manage all frequently asked questions for your website. ")],-1)),t(d,{color:"primary",class:"mt-4 md:mt-0",onClick:B,size:"large","prepend-icon":"tabler-plus"},{default:a(()=>e[6]||(e[6]=[i(" Add FAQ ")])),_:1})]),_:1})]),r.value?(y(),j(z,{key:0,type:"error",class:"mb-4"},{default:a(()=>[i(g(r.value),1)]),_:1})):I("",!0),t(L,{items:b.value,loading:n.value,class:"rounded-lg shadow",headers:[{title:"Question",key:"question"},{title:"Answer",key:"answer"},{title:"Created",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],"item-value":"id",density:"comfortable"},{"item.created_at":a(({item:o})=>[f("span",H,g(new Date(o.created_at).toLocaleString()),1)]),"item.actions":a(({item:o})=>[t(d,{icon:"",variant:"text",color:"primary",onClick:T=>M(o)},{default:a(()=>[t(C,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(d,{icon:"",variant:"text",color:"error",onClick:T=>N(o.id)},{default:a(()=>[t(C,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),"no-data":a(()=>e[8]||(e[8]=[f("div",{class:"text-center text-gray-400 py-8"},"No data.",-1)])),_:1},8,["items","loading"]),t(_,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=o=>m.value=o),"max-width":"500"},{default:a(()=>[t(w,null,{default:a(()=>[t(k,null,{default:a(()=>[i(g(v.value?"Edit FAQ":"Add FAQ"),1)]),_:1}),t(F,null,{default:a(()=>[t(Y,{onSubmit:O(x,["prevent"])},{default:a(()=>[t(D,{modelValue:s.question,"onUpdate:modelValue":e[0]||(e[0]=o=>s.question=o),label:"Question",required:"",class:"mb-4"},null,8,["modelValue"]),t(D,{modelValue:s.answer,"onUpdate:modelValue":e[1]||(e[1]=o=>s.answer=o),label:"Answer",required:"",class:"mb-4"},null,8,["modelValue"])]),_:1})]),_:1}),t(A,null,{default:a(()=>[t(Q),t(d,{text:"",onClick:e[2]||(e[2]=o=>m.value=!1)},{default:a(()=>e[9]||(e[9]=[i("Cancel")])),_:1}),t(d,{color:"primary",loading:n.value,onClick:x},{default:a(()=>e[10]||(e[10]=[i(" Save ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(_,{modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=o=>p.value=o),"max-width":"400"},{default:a(()=>[t(w,null,{default:a(()=>[t(k,null,{default:a(()=>e[11]||(e[11]=[i("Delete FAQ?")])),_:1}),t(F,null,{default:a(()=>e[12]||(e[12]=[i(" Are you sure you want to delete this FAQ? ")])),_:1}),t(A,null,{default:a(()=>[t(Q),t(d,{text:"",onClick:e[4]||(e[4]=o=>p.value=!1)},{default:a(()=>e[13]||(e[13]=[i("Cancel")])),_:1}),t(d,{color:"error",loading:n.value,onClick:S},{default:a(()=>e[14]||(e[14]=[i(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{we as default};
