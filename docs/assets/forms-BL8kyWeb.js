import{a9 as ae,aa as oe,aE as E,b9 as ie,r as v,ba as se,W as $,aS as ne,ab as re,bb as de,b as e,q as R,F as ue,az as ce,bc as me,Y as q,bd as fe,be as ve,b3 as pe,D as Ve,c as M,o as A,d as p,f as ke,m as be,e as o,Z as V,t as m,v as g,a1 as ge}from"./index-BSrEpKCG.js";import{s as D}from"./supabase-CLvCFVIN.js";import{V as N,b as j,c as O}from"./VCard-Y1LpnWPN.js";import{V as ye}from"./VAlert-C-rJ70cL.js";import{V as Ce}from"./VChip-BojgjKZQ.js";import{a as W,m as _e,V as we}from"./VDataTable-CeB3qyly.js";import{V as Y}from"./VCardText-Bx15PSM1.js";import{V as xe}from"./VForm-CVJjlbX-.js";import{u as Se,b as Z,m as Fe,a as L}from"./VTextField-URD2zi5H.js";import{V as Ae}from"./VTextarea-CYFmOcWX.js";import{V as G}from"./VSpacer-rbIGVmzN.js";import{V as H}from"./VDialog-B074-LLA.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-Bc1fdQwQ.js";import"./VImg-BBjrF-AM.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-BiVMF_SH.js";import"./VDivider-CuYvtWg4.js";import"./VOverlay-2KhokDXS.js";import"./VMenu-Eh9bdt58.js";/* empty css              */const De=oe({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Fe(),..._e()},"VSwitch"),he=ae()({name:"VSwitch",inheritAttrs:!1,props:De(),emits:{"update:focused":i=>!0,"update:modelValue":i=>!0,"update:indeterminate":i=>!0},setup(i,r){let{attrs:d,slots:n}=r;const u=E(i,"indeterminate"),c=E(i,"modelValue"),{loaderClasses:k}=ie(i),{isFocused:a,focus:_,blur:y}=Se(i),w=v(),x=se&&window.matchMedia("(forced-colors: active)").matches,S=$(()=>typeof i.loading=="string"&&i.loading!==""?i.loading:i.color),h=ne(),B=$(()=>i.id||`switch-${h}`);function s(){u.value&&(u.value=!1)}function t(l){var b,F;l.stopPropagation(),l.preventDefault(),(F=(b=w.value)==null?void 0:b.input)==null||F.click()}return re(()=>{const[l,b]=de(d),F=Z.filterProps(i),J=W.filterProps(i);return e(Z,R({class:["v-switch",{"v-switch--flat":i.flat},{"v-switch--inset":i.inset},{"v-switch--indeterminate":u.value},k.value,i.class]},l,F,{modelValue:c.value,"onUpdate:modelValue":I=>c.value=I,id:B.value,focused:a.value,style:i.style}),{...n,default:I=>{let{id:K,messagesId:Q,isDisabled:X,isReadonly:ee,isValid:z}=I;const P={model:c,isValid:z};return e(W,R({ref:w},J,{modelValue:c.value,"onUpdate:modelValue":[C=>c.value=C,s],id:K.value,"aria-describedby":Q.value,type:"checkbox","aria-checked":u.value?"mixed":void 0,disabled:X.value,readonly:ee.value,onFocus:_,onBlur:y},b),{...n,default:C=>{let{backgroundColorClasses:T,backgroundColorStyles:f}=C;return e("div",{class:["v-switch__track",x?void 0:T.value],style:f.value,onClick:t},[n["track-true"]&&e("div",{key:"prepend",class:"v-switch__track-true"},[n["track-true"](P)]),n["track-false"]&&e("div",{key:"append",class:"v-switch__track-false"},[n["track-false"](P)])])},input:C=>{let{inputNode:T,icon:f,backgroundColorClasses:te,backgroundColorStyles:le}=C;return e(ue,null,[T,e("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":f||i.loading},i.inset||x?void 0:te.value],style:i.inset?void 0:le.value},[n.thumb?e(ce,{defaults:{VIcon:{icon:f,size:"x-small"}}},{default:()=>[n.thumb({...P,icon:f})]}):e(me,null,{default:()=>[i.loading?e(fe,{name:"v-switch",active:!0,color:z.value===!1?void 0:S.value},{default:U=>n.loader?n.loader(U):e(ve,{active:U.isActive,color:U.color,indeterminate:!0,size:"16",width:"2"},null)}):f&&e(q,{key:String(f),icon:f,size:"x-small"},null)]})])])}})}})}),{}}}),Be={class:"p-6"},Ie={class:"mb-8"},Pe={key:0,class:"material-icons"},Te={key:1,class:"text-gray-400"},Ue=["href"],Me={class:"text-xs text-gray-500"},at={__name:"forms",setup(i){const r=v(!1),d=v(""),n=v([]),u=v(!1),c=v(!1),k=v(!1),a=pe({id:null,icon:"",title:"",link:"",description:"",is_active:!0}),_=v(null),y=async()=>{r.value=!0,d.value="";const{data:s,error:t}=await D.from("forms").select("*").order("created_at",{ascending:!1});t?d.value=t.message:n.value=s,r.value=!1},w=()=>{k.value=!1,Object.assign(a,{id:null,icon:"",title:"",link:"",description:"",is_active:!0}),u.value=!0},x=s=>{k.value=!0,Object.assign(a,s),u.value=!0},S=async()=>{if(!a.title||!a.link){d.value="Title and Link are required";return}r.value=!0,d.value="";let s;k.value?s=await D.from("forms").update({icon:a.icon,title:a.title,link:a.link,description:a.description,is_active:a.is_active}).eq("id",a.id).select():s=await D.from("forms").insert([{icon:a.icon,title:a.title,link:a.link,description:a.description,is_active:a.is_active}]).select(),s.error?d.value=s.error.message:(u.value=!1,y()),r.value=!1},h=s=>{_.value=s,c.value=!0},B=async()=>{r.value=!0,d.value="";const{error:s}=await D.from("forms").delete().eq("id",_.value);s&&(d.value=s.message),c.value=!1,y(),r.value=!1};return Ve(y),(s,t)=>(A(),M("div",Be,[p("div",Ie,[e(N,{flat:"",class:"py-6 px-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-none border-b border-gray-200"},{default:o(()=>[t[10]||(t[10]=p("div",null,[p("h2",{class:"text-2xl font-bold mb-1"},"Forms Management"),p("p",{class:"text-gray-500 text-base"}," Manage all forms and their visibility on your website. ")],-1)),e(V,{color:"primary",class:"mt-4 md:mt-0",onClick:w,size:"large","prepend-icon":"tabler-plus"},{default:o(()=>t[9]||(t[9]=[m(" Add Form ")])),_:1})]),_:1})]),d.value?(A(),ke(ye,{key:0,type:"error",class:"mb-4"},{default:o(()=>[m(g(d.value),1)]),_:1})):be("",!0),e(we,{items:n.value,loading:r.value,class:"rounded-lg shadow",headers:[{title:"Icon",key:"icon"},{title:"Title",key:"title"},{title:"Link",key:"link"},{title:"Description",key:"description"},{title:"Active",key:"is_active"},{title:"Created",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],"item-value":"id",density:"comfortable"},{"item.icon":o(({item:l})=>[l.icon?(A(),M("span",Pe,g(l.icon),1)):(A(),M("span",Te,"-"))]),"item.link":o(({item:l})=>[p("a",{href:l.link,target:"_blank",class:"text-primary underline break-all"},g(l.link),9,Ue)]),"item.is_active":o(({item:l})=>[e(Ce,{color:l.is_active?"success":"error",size:"small"},{default:o(()=>[m(g(l.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),"item.created_at":o(({item:l})=>[p("span",Me,g(new Date(l.created_at).toLocaleString()),1)]),"item.actions":o(({item:l})=>[e(V,{icon:"",variant:"text",color:"primary",onClick:b=>x(l)},{default:o(()=>[e(q,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(V,{icon:"",variant:"text",color:"error",onClick:b=>h(l.id)},{default:o(()=>[e(q,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),"no-data":o(()=>t[11]||(t[11]=[p("div",{class:"text-center text-gray-400 py-8"},"No data.",-1)])),_:1},8,["items","loading"]),e(H,{modelValue:u.value,"onUpdate:modelValue":t[6]||(t[6]=l=>u.value=l),"max-width":"500"},{default:o(()=>[e(N,null,{default:o(()=>[e(j,null,{default:o(()=>[m(g(k.value?"Edit Form":"Add Form"),1)]),_:1}),e(Y,null,{default:o(()=>[e(xe,{onSubmit:ge(S,["prevent"])},{default:o(()=>[e(L,{modelValue:a.icon,"onUpdate:modelValue":t[0]||(t[0]=l=>a.icon=l),label:"Material Icon Name",class:"mb-4"},null,8,["modelValue"]),e(L,{modelValue:a.title,"onUpdate:modelValue":t[1]||(t[1]=l=>a.title=l),label:"Title",required:"",class:"mb-4"},null,8,["modelValue"]),e(L,{modelValue:a.link,"onUpdate:modelValue":t[2]||(t[2]=l=>a.link=l),label:"Link",required:"",class:"mb-4"},null,8,["modelValue"]),e(Ae,{modelValue:a.description,"onUpdate:modelValue":t[3]||(t[3]=l=>a.description=l),label:"Description",class:"mb-4"},null,8,["modelValue"]),e(he,{modelValue:a.is_active,"onUpdate:modelValue":t[4]||(t[4]=l=>a.is_active=l),label:"Active",class:"mb-4"},null,8,["modelValue"])]),_:1})]),_:1}),e(O,null,{default:o(()=>[e(G),e(V,{text:"",onClick:t[5]||(t[5]=l=>u.value=!1)},{default:o(()=>t[12]||(t[12]=[m("Cancel")])),_:1}),e(V,{color:"primary",loading:r.value,onClick:S},{default:o(()=>t[13]||(t[13]=[m(" Save ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(H,{modelValue:c.value,"onUpdate:modelValue":t[8]||(t[8]=l=>c.value=l),"max-width":"400"},{default:o(()=>[e(N,null,{default:o(()=>[e(j,null,{default:o(()=>t[14]||(t[14]=[m("Delete Form?")])),_:1}),e(Y,null,{default:o(()=>t[15]||(t[15]=[m(" Are you sure you want to delete this form? ")])),_:1}),e(O,null,{default:o(()=>[e(G),e(V,{text:"",onClick:t[7]||(t[7]=l=>c.value=!1)},{default:o(()=>t[16]||(t[16]=[m("Cancel")])),_:1}),e(V,{color:"error",loading:r.value,onClick:B},{default:o(()=>t[17]||(t[17]=[m(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{at as default};
