import{r as u,b3 as $,D as j,c as I,o as C,d as f,f as K,m as O,b as t,e as l,Z as d,t as i,v as y,Y as w,a1 as F}from"./index-C_Fo-Q1Z.js";import{s as c}from"./supabase-dF8vZqmp.js";import{V as g,b as D,c as S}from"./VCard-DIix0bcz.js";import{V as L}from"./VAlert-Cp-4rYs2.js";import{V as z}from"./VDataTable-Biu5DSsd.js";import{V as _}from"./VCardText-oi22yba3.js";import{V as Y}from"./VForm-BeUWgbEy.js";import{a as A}from"./VTextField-B25NbKOl.js";import{V as Z}from"./VTextarea-kPssa-L-.js";import{V as T}from"./VSpacer-_k1Z9FJN.js";import{V as U}from"./VDialog-BhUTdbvn.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-C3GauEvc.js";import"./VImg-BUi6ipbq.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-JGcb-0Dy.js";import"./VDivider-Cl56lCsf.js";import"./VOverlay-D2VBwOt_.js";import"./VMenu-CKbpf5eF.js";import"./VChip-D-vlibiD.js";/* empty css              */const G={class:"p-6"},H={class:"mb-8"},J={class:"text-xs text-gray-500"},Ve={__name:"pages",setup(P){const s=u(!1),r=u(""),b=u([]),m=u(!1),v=u(!1),p=u(!1),a=$({id:null,section:"",key:"",value:""}),k=u(null),V=async()=>{s.value=!0,r.value="";const{data:n,error:e}=await c.from("content").select("*").order("updated_at",{ascending:!1});e?r.value=e.message:b.value=n,s.value=!1},q=()=>{p.value=!1,Object.assign(a,{id:null,section:"",key:"",value:""}),m.value=!0},B=n=>{p.value=!0,Object.assign(a,n),m.value=!0},x=async()=>{if(!a.section||!a.key){r.value="Section and Key are required";return}s.value=!0,r.value="";let n;p.value?n=await c.from("content").update({section:a.section,key:a.key,value:a.value,updated_at:new Date().toISOString()}).eq("id",a.id).select():n=await c.from("content").insert([{section:a.section,key:a.key,value:a.value}]).select(),n.error?r.value=n.error.message:(m.value=!1,V()),s.value=!1},M=n=>{k.value=n,v.value=!0},N=async()=>{s.value=!0,r.value="";const{error:n}=await c.from("content").delete().eq("id",k.value);n&&(r.value=n.message),v.value=!1,V(),s.value=!1};return j(V),(n,e)=>(C(),I("div",G,[f("div",H,[t(g,{flat:"",class:"py-6 px-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-none border-b border-gray-200"},{default:l(()=>[e[8]||(e[8]=f("div",null,[f("h2",{class:"text-2xl font-bold mb-1"},"Content Management"),f("p",{class:"text-gray-500 text-base"}," Manage all dynamic content for each section of your website. ")],-1)),t(d,{color:"primary",class:"mt-4 md:mt-0",onClick:q,size:"large","prepend-icon":"tabler-plus"},{default:l(()=>e[7]||(e[7]=[i(" Add Content ")])),_:1})]),_:1})]),r.value?(C(),K(L,{key:0,type:"error",class:"mb-4"},{default:l(()=>[i(y(r.value),1)]),_:1})):O("",!0),t(z,{items:b.value,loading:s.value,class:"rounded-lg shadow",headers:[{title:"Section",key:"section"},{title:"Key",key:"key"},{title:"Value",key:"value"},{title:"Updated",key:"updated_at"},{title:"Actions",key:"actions",sortable:!1}],"item-value":"id",density:"comfortable"},{"item.updated_at":l(({item:o})=>[f("span",J,y(new Date(o.updated_at).toLocaleString()),1)]),"item.actions":l(({item:o})=>[t(d,{icon:"",variant:"text",color:"primary",onClick:E=>B(o)},{default:l(()=>[t(w,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(d,{icon:"",variant:"text",color:"error",onClick:E=>M(o.id)},{default:l(()=>[t(w,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),"no-data":l(()=>e[9]||(e[9]=[f("div",{class:"text-center text-gray-400 py-8"},"No data.",-1)])),_:1},8,["items","loading"]),t(U,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=o=>m.value=o),"max-width":"500"},{default:l(()=>[t(g,null,{default:l(()=>[t(D,null,{default:l(()=>[i(y(p.value?"Edit Content":"Add Content"),1)]),_:1}),t(_,null,{default:l(()=>[t(Y,{onSubmit:F(x,["prevent"])},{default:l(()=>[t(A,{modelValue:a.section,"onUpdate:modelValue":e[0]||(e[0]=o=>a.section=o),label:"Section",required:"",class:"mb-4"},null,8,["modelValue"]),t(A,{modelValue:a.key,"onUpdate:modelValue":e[1]||(e[1]=o=>a.key=o),label:"Key",required:"",class:"mb-4"},null,8,["modelValue"]),t(Z,{modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value=o),label:"Value",rows:"3",class:"mb-4"},null,8,["modelValue"])]),_:1})]),_:1}),t(S,null,{default:l(()=>[t(T),t(d,{text:"",onClick:e[3]||(e[3]=o=>m.value=!1)},{default:l(()=>e[10]||(e[10]=[i("Cancel")])),_:1}),t(d,{color:"primary",loading:s.value,onClick:x},{default:l(()=>e[11]||(e[11]=[i(" Save ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:v.value,"onUpdate:modelValue":e[6]||(e[6]=o=>v.value=o),"max-width":"400"},{default:l(()=>[t(g,null,{default:l(()=>[t(D,null,{default:l(()=>e[12]||(e[12]=[i("Delete Content?")])),_:1}),t(_,null,{default:l(()=>e[13]||(e[13]=[i(" Are you sure you want to delete this content? ")])),_:1}),t(S,null,{default:l(()=>[t(T),t(d,{text:"",onClick:e[5]||(e[5]=o=>v.value=!1)},{default:l(()=>e[14]||(e[14]=[i("Cancel")])),_:1}),t(d,{color:"error",loading:s.value,onClick:N},{default:l(()=>e[15]||(e[15]=[i(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{Ve as default};
