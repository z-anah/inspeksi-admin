import{r as i,b3 as T,D as j,c as E,o as C,d,f as $,m as F,b as a,e as l,Z as m,t as u,v as V,Y as k,a1 as I}from"./index-BSrEpKCG.js";import{s as g}from"./supabase-CLvCFVIN.js";import{V as b,b as w,c as D}from"./VCard-Y1LpnWPN.js";import{V as O}from"./VAlert-C-rJ70cL.js";import{V as R}from"./VDataTable-CeB3qyly.js";import{V as N}from"./VCardText-Bx15PSM1.js";import{V as z}from"./VForm-CVJjlbX-.js";import{a as P}from"./VTextField-URD2zi5H.js";import{V as L}from"./VSpacer-rbIGVmzN.js";import{V as A}from"./VDialog-B074-LLA.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-Bc1fdQwQ.js";import"./VImg-BBjrF-AM.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-BiVMF_SH.js";import"./VDivider-CuYvtWg4.js";import"./VOverlay-2KhokDXS.js";import"./VMenu-Eh9bdt58.js";import"./VChip-BojgjKZQ.js";/* empty css              */const Y={class:"p-6"},Z={class:"mb-8"},G=["src"],H={class:"text-xs text-gray-500"},ge={__name:"partners",setup(J){const s=i(!1),n=i(""),x=i([]),f=i(!1),p=i(!1),v=i(!1),r=T({id:null,name:"",logo_url:""}),y=i(null),c=async()=>{s.value=!0,n.value="";const{data:o,error:e}=await g.from("partners").select("*").order("created_at",{ascending:!1});e?n.value=e.message:x.value=o,s.value=!1},U=()=>{v.value=!1,Object.assign(r,{id:null,name:"",logo_url:""}),f.value=!0},q=o=>{v.value=!0,Object.assign(r,o),f.value=!0},_=async()=>{if(!r.name||!r.logo_url){n.value="Name and Logo URL are required";return}s.value=!0,n.value="";let o;v.value?o=await g.from("partners").update({name:r.name,logo_url:r.logo_url}).eq("id",r.id).select():o=await g.from("partners").insert([{name:r.name,logo_url:r.logo_url}]).select(),o.error?n.value=o.error.message:(f.value=!1,c()),s.value=!1},B=o=>{y.value=o,p.value=!0},M=async()=>{s.value=!0,n.value="";const{error:o}=await g.from("partners").delete().eq("id",y.value);o&&(n.value=o.message),p.value=!1,c(),s.value=!1};return j(c),(o,e)=>(C(),E("div",Y,[d("div",Z,[a(b,{flat:"",class:"py-6 px-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-none border-b border-gray-200"},{default:l(()=>[e[7]||(e[7]=d("div",null,[d("h2",{class:"text-2xl font-bold mb-1"},"Partners Management"),d("p",{class:"text-gray-500 text-base"}," Manage all partners and their logos displayed on your website. ")],-1)),a(m,{color:"primary",class:"mt-4 md:mt-0",onClick:U,size:"large","prepend-icon":"tabler-plus"},{default:l(()=>e[6]||(e[6]=[u(" Add Partner ")])),_:1})]),_:1})]),n.value?(C(),$(O,{key:0,type:"error",class:"mb-4"},{default:l(()=>[u(V(n.value),1)]),_:1})):F("",!0),a(R,{items:x.value,loading:s.value,class:"rounded-lg shadow",headers:[{title:"Name",key:"name"},{title:"Logo",key:"logo_url"},{title:"Created",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],"item-value":"id",density:"comfortable"},{"item.logo_url":l(({item:t})=>[d("img",{src:t.logo_url,alt:"logo",class:"h-10 max-w-[100px] object-contain"},null,8,G)]),"item.created_at":l(({item:t})=>[d("span",H,V(new Date(t.created_at).toLocaleString()),1)]),"item.actions":l(({item:t})=>[a(m,{icon:"",variant:"text",color:"primary",onClick:S=>q(t)},{default:l(()=>[a(k,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(m,{icon:"",variant:"text",color:"error",onClick:S=>B(t.id)},{default:l(()=>[a(k,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),"no-data":l(()=>e[8]||(e[8]=[d("div",{class:"text-center text-gray-400 py-8"},"No data.",-1)])),_:1},8,["items","loading"]),a(A,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=t=>f.value=t),"max-width":"500"},{default:l(()=>[a(b,null,{default:l(()=>[a(w,null,{default:l(()=>[u(V(v.value?"Edit Partner":"Add Partner"),1)]),_:1}),a(N,null,{default:l(()=>[a(z,{onSubmit:I(_,["prevent"])},{default:l(()=>[a(P,{modelValue:r.name,"onUpdate:modelValue":e[0]||(e[0]=t=>r.name=t),label:"Name",required:"",class:"mb-4"},null,8,["modelValue"]),a(P,{modelValue:r.logo_url,"onUpdate:modelValue":e[1]||(e[1]=t=>r.logo_url=t),label:"Logo URL",required:"",class:"mb-4"},null,8,["modelValue"])]),_:1})]),_:1}),a(D,null,{default:l(()=>[a(L),a(m,{text:"",onClick:e[2]||(e[2]=t=>f.value=!1)},{default:l(()=>e[9]||(e[9]=[u("Cancel")])),_:1}),a(m,{color:"primary",loading:s.value,onClick:_},{default:l(()=>e[10]||(e[10]=[u(" Save ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(A,{modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=t=>p.value=t),"max-width":"400"},{default:l(()=>[a(b,null,{default:l(()=>[a(w,null,{default:l(()=>e[11]||(e[11]=[u("Delete Partner?")])),_:1}),a(N,null,{default:l(()=>e[12]||(e[12]=[u(" Are you sure you want to delete this partner? ")])),_:1}),a(D,null,{default:l(()=>[a(L),a(m,{text:"",onClick:e[4]||(e[4]=t=>p.value=!1)},{default:l(()=>e[13]||(e[13]=[u("Cancel")])),_:1}),a(m,{color:"error",loading:s.value,onClick:M},{default:l(()=>e[14]||(e[14]=[u(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{ge as default};
