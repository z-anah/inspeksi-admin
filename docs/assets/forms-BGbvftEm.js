import{a6 as ie,a7 as se,aC as E,b5 as ne,r as p,b6 as re,W as $,aD as de,a8 as ue,aF as ce,b as t,p as R,F as K,aY as me,b7 as fe,Y as q,b8 as ve,aB as pe,am as ke,D as Ve,c as M,o as A,d as f,e as a,s as r,f as be,l as ge,Z as k,t as g,a1 as ye}from"./index-DlJANnYd.js";import{s as h}from"./supabase-BzEWn3Nz.js";import{V as j}from"./VAlert-D6AfPq5Y.js";import{V as N,b as O,c as W}from"./VCard-D_fsEcSS.js";import{V as Ce}from"./VChip-CgJgXsye.js";import{V as xe}from"./VDataTable-CHvIH-ym.js";import{V as Y}from"./VCardText-BPQfIJ-x.js";import{V as _e}from"./VForm-CZCxUfyJ.js";import{u as we,b as Z,a as Fe,d as L}from"./VTextField-DDrVlWqV.js";import{V as Se}from"./VTextarea-DUXMXu2G.js";import{a as G,m as Ae}from"./VSelect-C2nzsyO2.js";import{V as H}from"./VSpacer-C3GwWcfp.js";import{V as J}from"./VDialog-QTYNSIq0.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-BGAsHGGR.js";import"./VImg-qd_ukxwb.js";import"./VDivider-BAYtfDNH.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-DRd2BzU_.js";import"./ssrBoot-C6lHLCQi.js";import"./VOverlay-BJHMKcQj.js";import"./scopeId-RLq0CsSn.js";import"./VMenu-BQlFYYWv.js";/* empty css              */const he=se({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Fe(),...Ae()},"VSwitch"),De=ie()({name:"VSwitch",inheritAttrs:!1,props:he(),emits:{"update:focused":i=>!0,"update:modelValue":i=>!0,"update:indeterminate":i=>!0},setup(i,d){let{attrs:u,slots:n}=d;const c=E(i,"indeterminate"),m=E(i,"modelValue"),{loaderClasses:V}=ne(i),{isFocused:o,focus:x,blur:y}=we(i),_=p(),w=re&&window.matchMedia("(forced-colors: active)").matches,F=$(()=>typeof i.loading=="string"&&i.loading!==""?i.loading:i.color),D=de(),B=$(()=>i.id||`switch-${D}`);function s(){c.value&&(c.value=!1)}function e(l){var b,S;l.stopPropagation(),l.preventDefault(),(S=(b=_.value)==null?void 0:b.input)==null||S.click()}return ue(()=>{const[l,b]=ce(u),S=Z.filterProps(i),Q=G.filterProps(i);return t(Z,R({class:["v-switch",{"v-switch--flat":i.flat},{"v-switch--inset":i.inset},{"v-switch--indeterminate":c.value},V.value,i.class]},l,S,{modelValue:m.value,"onUpdate:modelValue":I=>m.value=I,id:B.value,focused:o.value,style:i.style}),{...n,default:I=>{let{id:X,messagesId:ee,isDisabled:te,isReadonly:le,isValid:z}=I;const P={model:m,isValid:z};return t(G,R({ref:_},Q,{modelValue:m.value,"onUpdate:modelValue":[C=>m.value=C,s],id:X.value,"aria-describedby":ee.value,type:"checkbox","aria-checked":c.value?"mixed":void 0,disabled:te.value,readonly:le.value,onFocus:x,onBlur:y},b),{...n,default:C=>{let{backgroundColorClasses:T,backgroundColorStyles:v}=C;return t("div",{class:["v-switch__track",w?void 0:T.value],style:v.value,onClick:e},[n["track-true"]&&t("div",{key:"prepend",class:"v-switch__track-true"},[n["track-true"](P)]),n["track-false"]&&t("div",{key:"append",class:"v-switch__track-false"},[n["track-false"](P)])])},input:C=>{let{inputNode:T,icon:v,backgroundColorClasses:ae,backgroundColorStyles:oe}=C;return t(K,null,[T,t("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":v||i.loading},i.inset||w?void 0:ae.value],style:i.inset?void 0:oe.value},[n.thumb?t(me,{defaults:{VIcon:{icon:v,size:"x-small"}}},{default:()=>[n.thumb({...P,icon:v})]}):t(fe,null,{default:()=>[i.loading?t(ve,{name:"v-switch",active:!0,color:z.value===!1?void 0:F.value},{default:U=>n.loader?n.loader(U):t(pe,{active:U.isActive,color:U.color,indeterminate:!0,size:"16",width:"2"},null)}):v&&t(q,{key:String(v),icon:v,size:"x-small"},null)]})])])}})}})}),{}}}),Be={class:"p-6"},Ie={class:"mb-8"},Pe={key:0,class:"material-icons"},Te={key:1,class:"text-gray-400"},Ue=["href"],Me={class:"text-xs text-gray-500"},st={__name:"forms",setup(i){const d=p(!1),u=p(""),n=p([]),c=p(!1),m=p(!1),V=p(!1),o=ke({id:null,icon:"",title:"",link:"",description:"",is_active:!0}),x=p(null),y=async()=>{d.value=!0,u.value="";const{data:s,error:e}=await h.from("forms").select("*").order("created_at",{ascending:!1});e?u.value=e.message:n.value=s,d.value=!1},_=()=>{V.value=!1,Object.assign(o,{id:null,icon:"",title:"",link:"",description:"",is_active:!0}),c.value=!0},w=s=>{V.value=!0,Object.assign(o,s),c.value=!0},F=async()=>{if(!o.title||!o.link){u.value="Title and Link are required";return}d.value=!0,u.value="";let s;V.value?s=await h.from("forms").update({icon:o.icon,title:o.title,link:o.link,description:o.description,is_active:o.is_active}).eq("id",o.id).select():s=await h.from("forms").insert([{icon:o.icon,title:o.title,link:o.link,description:o.description,is_active:o.is_active}]).select(),s.error?u.value=s.error.message:(c.value=!1,y()),d.value=!1},D=s=>{x.value=s,m.value=!0},B=async()=>{d.value=!0,u.value="";const{error:s}=await h.from("forms").delete().eq("id",x.value);s&&(u.value=s.message),m.value=!1,y(),d.value=!1};return Ve(y),(s,e)=>(A(),M(K,null,[t(j,{type:"info",class:"mb-4",variant:"tonal"},{default:a(()=>e[9]||(e[9]=[r(" Untuk memilih ikon, silakan cek daftar nama ikon di "),f("a",{href:"https://tabler.io/icons",target:"_blank",class:"text-primary font-semibold underline"}," https://tabler.io/icons",-1),r(" dan gunakan nama ikon (misal: "),f("code",null,"tabler-user",-1),r("). ")])),_:1}),f("div",Be,[f("div",Ie,[t(N,{flat:"",class:"py-6 px-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-none border-b border-gray-200"},{default:a(()=>[e[11]||(e[11]=f("div",null,[f("h2",{class:"text-2xl font-bold mb-1"},"Forms Management"),f("p",{class:"text-gray-500 text-base"}," Manage all forms and their visibility on your website. ")],-1)),t(k,{color:"primary",class:"mt-4 md:mt-0",onClick:_,size:"large","prepend-icon":"tabler-plus"},{default:a(()=>e[10]||(e[10]=[r(" Add Form ")])),_:1})]),_:1})]),u.value?(A(),be(j,{key:0,type:"error",class:"mb-4"},{default:a(()=>[r(g(u.value),1)]),_:1})):ge("",!0),t(xe,{items:n.value,loading:d.value,class:"rounded-lg shadow",headers:[{title:"Icon",key:"icon"},{title:"Title",key:"title"},{title:"Link",key:"link"},{title:"Active",key:"is_active"},{title:"Created",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],"item-value":"id",density:"comfortable"},{"item.icon":a(({item:l})=>[l.icon?(A(),M("span",Pe,g(l.icon),1)):(A(),M("span",Te,"-"))]),"item.link":a(({item:l})=>[f("a",{href:l.link,target:"_blank",class:"text-primary underline break-all"},g(l.link),9,Ue)]),"item.is_active":a(({item:l})=>[t(Ce,{color:l.is_active?"success":"error",size:"small"},{default:a(()=>[r(g(l.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),"item.created_at":a(({item:l})=>[f("span",Me,g(new Date(l.created_at).toLocaleString()),1)]),"item.actions":a(({item:l})=>[t(k,{icon:"",variant:"text",color:"primary",onClick:b=>w(l)},{default:a(()=>[t(q,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(k,{icon:"",variant:"text",color:"error",onClick:b=>D(l.id)},{default:a(()=>[t(q,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),"no-data":a(()=>e[12]||(e[12]=[f("div",{class:"text-center text-gray-400 py-8"},"No data.",-1)])),_:1},8,["items","loading"]),t(J,{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=l=>c.value=l),"max-width":"500"},{default:a(()=>[t(N,null,{default:a(()=>[t(O,null,{default:a(()=>[r(g(V.value?"Edit Form":"Add Form"),1)]),_:1}),t(Y,null,{default:a(()=>[t(_e,{onSubmit:ye(F,["prevent"])},{default:a(()=>[t(L,{modelValue:o.icon,"onUpdate:modelValue":e[0]||(e[0]=l=>o.icon=l),label:"Material Icon Name",class:"mb-4"},null,8,["modelValue"]),t(L,{modelValue:o.title,"onUpdate:modelValue":e[1]||(e[1]=l=>o.title=l),label:"Title",required:"",class:"mb-4"},null,8,["modelValue"]),t(L,{modelValue:o.link,"onUpdate:modelValue":e[2]||(e[2]=l=>o.link=l),label:"Link",required:"",class:"mb-4"},null,8,["modelValue"]),t(Se,{modelValue:o.description,"onUpdate:modelValue":e[3]||(e[3]=l=>o.description=l),label:"Description",class:"mb-4"},null,8,["modelValue"]),t(De,{modelValue:o.is_active,"onUpdate:modelValue":e[4]||(e[4]=l=>o.is_active=l),label:"Active",class:"mb-4"},null,8,["modelValue"])]),_:1})]),_:1}),t(W,null,{default:a(()=>[t(H),t(k,{text:"",onClick:e[5]||(e[5]=l=>c.value=!1)},{default:a(()=>e[13]||(e[13]=[r("Cancel")])),_:1}),t(k,{color:"primary",loading:d.value,onClick:F},{default:a(()=>e[14]||(e[14]=[r(" Save ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(J,{modelValue:m.value,"onUpdate:modelValue":e[8]||(e[8]=l=>m.value=l),"max-width":"400"},{default:a(()=>[t(N,null,{default:a(()=>[t(O,null,{default:a(()=>e[15]||(e[15]=[r("Delete Form?")])),_:1}),t(Y,null,{default:a(()=>e[16]||(e[16]=[r(" Are you sure you want to delete this form? ")])),_:1}),t(W,null,{default:a(()=>[t(H),t(k,{text:"",onClick:e[7]||(e[7]=l=>m.value=!1)},{default:a(()=>e[17]||(e[17]=[r("Cancel")])),_:1}),t(k,{color:"error",loading:d.value,onClick:B},{default:a(()=>e[18]||(e[18]=[r(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};export{st as default};
