import{r as u,am as L,D as $,c as j,o as k,d as f,f as F,l as I,b as t,e as a,Z as d,s as n,t as x,Y as T,a1 as O}from"./index-DlJANnYd.js";import{s as c}from"./supabase-BzEWn3Nz.js";import{V as b,b as w,c as A}from"./VCard-D_fsEcSS.js";import{V as z}from"./VAlert-D6AfPq5Y.js";import{V as Y}from"./VDataTable-CHvIH-ym.js";import{V as D}from"./VCardText-BPQfIJ-x.js";import{V as Z}from"./VForm-CZCxUfyJ.js";import{V as G}from"./VTextarea-DUXMXu2G.js";import{d as _}from"./VTextField-DDrVlWqV.js";import{V as q}from"./VSpacer-C3GwWcfp.js";import{V as B}from"./VDialog-QTYNSIq0.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-BGAsHGGR.js";import"./VImg-qd_ukxwb.js";import"./VSelect-C2nzsyO2.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-DRd2BzU_.js";import"./ssrBoot-C6lHLCQi.js";import"./VDivider-BAYtfDNH.js";import"./VOverlay-BJHMKcQj.js";import"./scopeId-RLq0CsSn.js";import"./VMenu-BQlFYYWv.js";import"./VChip-CgJgXsye.js";/* empty css              */const H={class:"p-6"},J={class:"mb-8"},K={class:"text-xs text-gray-500"},ge={__name:"testimonials",setup(P){const r=u(!1),i=u(""),g=u([]),m=u(!1),p=u(!1),v=u(!1),l=L({id:null,text:"",author:"",location:""}),y=u(null),V=async()=>{r.value=!0,i.value="";const{data:s,error:e}=await c.from("testimonials").select("*").order("created_at",{ascending:!1});e?i.value=e.message:g.value=s,r.value=!1},M=()=>{v.value=!1,Object.assign(l,{id:null,text:"",author:"",location:""}),m.value=!0},N=s=>{v.value=!0,Object.assign(l,s),m.value=!0},C=async()=>{if(!l.text||!l.author){i.value="Text and Author are required";return}r.value=!0,i.value="";let s;v.value?s=await c.from("testimonials").update({text:l.text,author:l.author,location:l.location}).eq("id",l.id).select():s=await c.from("testimonials").insert([{text:l.text,author:l.author,location:l.location}]).select(),s.error?i.value=s.error.message:(m.value=!1,V()),r.value=!1},S=s=>{y.value=s,p.value=!0},U=async()=>{r.value=!0,i.value="";const{error:s}=await c.from("testimonials").delete().eq("id",y.value);s&&(i.value=s.message),p.value=!1,V(),r.value=!1};return $(V),(s,e)=>(k(),j("div",H,[f("div",J,[t(b,{flat:"",class:"py-6 px-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-none border-b border-gray-200"},{default:a(()=>[e[8]||(e[8]=f("div",null,[f("h2",{class:"text-2xl font-bold mb-1"},"Testimonials Management"),f("p",{class:"text-gray-500 text-base"}," Manage all testimonials displayed on your website. ")],-1)),t(d,{color:"primary",class:"mt-4 md:mt-0",onClick:M,size:"large","prepend-icon":"tabler-plus"},{default:a(()=>e[7]||(e[7]=[n(" Add Testimonial ")])),_:1})]),_:1})]),i.value?(k(),F(z,{key:0,type:"error",class:"mb-4"},{default:a(()=>[n(x(i.value),1)]),_:1})):I("",!0),t(Y,{items:g.value,loading:r.value,class:"rounded-lg shadow",headers:[{title:"Author",key:"author"},{title:"Location",key:"location"},{title:"Created",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],"item-value":"id",density:"comfortable"},{"item.created_at":a(({item:o})=>[f("span",K,x(new Date(o.created_at).toLocaleString()),1)]),"item.actions":a(({item:o})=>[t(d,{icon:"",variant:"text",color:"primary",onClick:E=>N(o)},{default:a(()=>[t(T,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(d,{icon:"",variant:"text",color:"error",onClick:E=>S(o.id)},{default:a(()=>[t(T,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),"no-data":a(()=>e[9]||(e[9]=[f("div",{class:"text-center text-gray-400 py-8"},"No data.",-1)])),_:1},8,["items","loading"]),t(B,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=o=>m.value=o),"max-width":"500"},{default:a(()=>[t(b,null,{default:a(()=>[t(w,null,{default:a(()=>[n(x(v.value?"Edit Testimonial":"Add Testimonial"),1)]),_:1}),t(D,null,{default:a(()=>[t(Z,{onSubmit:O(C,["prevent"])},{default:a(()=>[t(G,{modelValue:l.text,"onUpdate:modelValue":e[0]||(e[0]=o=>l.text=o),label:"Testimonial Text",required:"",class:"mb-4"},null,8,["modelValue"]),t(_,{modelValue:l.author,"onUpdate:modelValue":e[1]||(e[1]=o=>l.author=o),label:"Author",required:"",class:"mb-4"},null,8,["modelValue"]),t(_,{modelValue:l.location,"onUpdate:modelValue":e[2]||(e[2]=o=>l.location=o),label:"Location",class:"mb-4"},null,8,["modelValue"])]),_:1})]),_:1}),t(A,null,{default:a(()=>[t(q),t(d,{text:"",onClick:e[3]||(e[3]=o=>m.value=!1)},{default:a(()=>e[10]||(e[10]=[n("Cancel")])),_:1}),t(d,{color:"primary",loading:r.value,onClick:C},{default:a(()=>e[11]||(e[11]=[n(" Save ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=o=>p.value=o),"max-width":"400"},{default:a(()=>[t(b,null,{default:a(()=>[t(w,null,{default:a(()=>e[12]||(e[12]=[n("Delete Testimonial?")])),_:1}),t(D,null,{default:a(()=>e[13]||(e[13]=[n(" Are you sure you want to delete this testimonial? ")])),_:1}),t(A,null,{default:a(()=>[t(q),t(d,{text:"",onClick:e[5]||(e[5]=o=>p.value=!1)},{default:a(()=>e[14]||(e[14]=[n("Cancel")])),_:1}),t(d,{color:"error",loading:r.value,onClick:U},{default:a(()=>e[15]||(e[15]=[n(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{ge as default};
