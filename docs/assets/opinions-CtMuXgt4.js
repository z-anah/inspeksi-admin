import{r as u,am as E,D as $,c as j,o as w,d,f as z,l as F,b as t,e as l,s as n,Z as m,t as v,Y as g,a1 as L}from"./index-hJoZ10xC.js";import{s as V}from"./supabase-Cx3jqyjq.js";import{V as D}from"./VAlert-Br_nhDBq.js";import{V as x,b as O,c as T}from"./VCard-t7c1hBMb.js";import{V as Y}from"./VDataTable-By6ODQQe.js";import{V as _}from"./VCardText-DP9GEjz-.js";import{V as Z}from"./VForm-B4qOMbnl.js";import{d as A}from"./VTextField-DqmsUdQy.js";import{V as G}from"./VTextarea-Dh-5JDt1.js";import{V as q}from"./VSpacer-C1jw25IK.js";import{V as U}from"./VDialog-B-joYMac.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-vdd2hSY_.js";import"./VImg-Be6WiOd7.js";import"./VSelect-BXY4Zik-.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-C8Kl8a6C.js";import"./ssrBoot-BYfT7MCo.js";import"./VDivider-SO9d5dLn.js";import"./VOverlay-D3cjHvs0.js";import"./scopeId-CD6h5bM2.js";import"./VMenu-BHDLKHdv.js";import"./VChip-BZlecNgM.js";/* empty css              */const H={class:"p-6"},J={class:"mb-8"},K={class:"ms-2"},P={class:"text-xs text-gray-500"},ye={__name:"opinions",setup(Q){const y=u([]),r=u(!1),s=u(""),p=u(!1),f=u(!1),c=u(!1),o=E({id:null,icon:"",title:"",description:""}),k=u(null),b=async()=>{r.value=!0,s.value="";const{data:i,error:e}=await V.from("opinion").select("*").order("created_at",{ascending:!1});e?s.value=e.message:y.value=i,r.value=!1},B=()=>{c.value=!1,Object.assign(o,{id:null,icon:"",title:"",description:""}),p.value=!0,s.value=""},I=i=>{c.value=!0,Object.assign(o,i),p.value=!0,s.value=""},C=async()=>{if(!o.icon||!o.title||!o.description){s.value="Icon, Title, and Description are required";return}r.value=!0,s.value="";let i;c.value?i=await V.from("opinion").update({icon:o.icon,title:o.title,description:o.description}).eq("id",o.id).select():i=await V.from("opinion").insert([{icon:o.icon,title:o.title,description:o.description}]).select(),i.error?s.value=i.error.message:(p.value=!1,b()),r.value=!1},M=i=>{k.value=i,f.value=!0},N=async()=>{r.value=!0,s.value="";const{error:i}=await V.from("opinion").delete().eq("id",k.value);i&&(s.value=i.message),f.value=!1,b(),r.value=!1};return $(b),(i,e)=>(w(),j("div",H,[d("div",J,[t(D,{type:"info",class:"mb-4",variant:"tonal"},{default:l(()=>e[7]||(e[7]=[n(" Untuk memilih ikon, silakan cek daftar nama ikon di "),d("a",{href:"https://tabler.io/icons",target:"_blank",class:"text-primary font-semibold underline"}," https://tabler.io/icons",-1),n(" dan gunakan nama ikon (misal: "),d("code",null,"tabler-user",-1),n("). ")])),_:1}),t(x,{flat:"",class:"py-6 px-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-none border-b border-gray-200"},{default:l(()=>[e[9]||(e[9]=d("div",null,[d("h2",{class:"text-2xl font-bold mb-1"},"Opinions Management"),d("p",{class:"text-gray-500 text-base"}," Manage all opinions for your website. ")],-1)),t(m,{color:"primary",class:"mt-4 md:mt-0",onClick:B,size:"large","prepend-icon":"tabler-plus"},{default:l(()=>e[8]||(e[8]=[n(" Add Opinion ")])),_:1})]),_:1})]),s.value?(w(),z(D,{key:0,type:"error",class:"mb-4"},{default:l(()=>[n(v(s.value),1)]),_:1})):F("",!0),t(Y,{items:y.value,loading:r.value,class:"rounded-lg shadow",headers:[{title:"Icon",key:"icon"},{title:"Title",key:"title"},{title:"Description",key:"description"},{title:"Created At",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],"item-value":"id",density:"comfortable"},{"item.icon":l(({item:a})=>[t(g,{icon:a.icon,size:"32"},null,8,["icon"]),d("span",K,v(a.icon),1)]),"item.created_at":l(({item:a})=>[d("span",P,v(new Date(a.created_at).toLocaleString()),1)]),"item.actions":l(({item:a})=>[t(m,{icon:"",variant:"text",color:"primary",onClick:S=>I(a)},{default:l(()=>[t(g,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(m,{icon:"",variant:"text",color:"error",onClick:S=>M(a.id)},{default:l(()=>[t(g,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),"no-data":l(()=>e[10]||(e[10]=[d("div",{class:"text-center text-gray-400 py-8"},"No data.",-1)])),_:1},8,["items","loading"]),t(U,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=a=>p.value=a),"max-width":"500"},{default:l(()=>[t(x,null,{default:l(()=>[t(O,null,{default:l(()=>[n(v(c.value?"Edit Opinion":"Add Opinion"),1)]),_:1}),t(_,null,{default:l(()=>[t(Z,{onSubmit:L(C,["prevent"])},{default:l(()=>[t(A,{modelValue:o.icon,"onUpdate:modelValue":e[0]||(e[0]=a=>o.icon=a),label:"Icon (e.g. tabler-star)",required:"",class:"mb-4"},null,8,["modelValue"]),t(A,{modelValue:o.title,"onUpdate:modelValue":e[1]||(e[1]=a=>o.title=a),label:"Title",required:"",class:"mb-4"},null,8,["modelValue"]),t(G,{modelValue:o.description,"onUpdate:modelValue":e[2]||(e[2]=a=>o.description=a),label:"Description",rows:"3",required:"",class:"mb-4"},null,8,["modelValue"])]),_:1})]),_:1}),t(T,null,{default:l(()=>[t(q),t(m,{text:"",onClick:e[3]||(e[3]=a=>p.value=!1)},{default:l(()=>e[11]||(e[11]=[n("Cancel")])),_:1}),t(m,{color:"primary",loading:r.value,onClick:C},{default:l(()=>e[12]||(e[12]=[n(" Save ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=a=>f.value=a),"max-width":"400"},{default:l(()=>[t(x,null,{default:l(()=>[t(O,null,{default:l(()=>e[13]||(e[13]=[n("Delete Opinion?")])),_:1}),t(_,null,{default:l(()=>e[14]||(e[14]=[n(" Are you sure you want to delete this opinion? ")])),_:1}),t(T,null,{default:l(()=>[t(q),t(m,{text:"",onClick:e[5]||(e[5]=a=>f.value=!1)},{default:l(()=>e[15]||(e[15]=[n("Cancel")])),_:1}),t(m,{color:"error",loading:r.value,onClick:N},{default:l(()=>e[16]||(e[16]=[n(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{ye as default};
