import{s as V}from"./supabase-BzEWn3Nz.js";import{r as n,am as N,j as M,D as $,c as v,o as m,d as o,f as j,l as E,b as a,e as t,Z as c,s as d,t as p,Y as k,F as L,h as S}from"./index-DlJANnYd.js";import{V as C,b as F,c as I}from"./VCard-D_fsEcSS.js";import{V as q}from"./VAlert-D6AfPq5Y.js";import{V as z}from"./VDataTable-CHvIH-ym.js";import{V as O}from"./VCardText-BPQfIJ-x.js";import{V as P}from"./VSpacer-C3GwWcfp.js";import{V as R}from"./VDialog-QTYNSIq0.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-BGAsHGGR.js";import"./VImg-qd_ukxwb.js";import"./VSelect-C2nzsyO2.js";import"./VTextField-DDrVlWqV.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-DRd2BzU_.js";import"./ssrBoot-C6lHLCQi.js";import"./VDivider-BAYtfDNH.js";import"./VOverlay-BJHMKcQj.js";import"./scopeId-RLq0CsSn.js";import"./VMenu-BQlFYYWv.js";import"./VChip-CgJgXsye.js";/* empty css              */const U={class:"p-6"},Y={class:"mb-8"},Z={class:"text-xs text-gray-700"},G={class:"list-disc pl-4"},H={class:"text-xs text-gray-500"},be={__name:"index",setup(J){const r=n(!1),i=n(""),y=n([]),x=n(!1),w=N({id:null,type:"",title:"",published_at:"",image_url:"",content:[]}),b=M(),u=n(!1),g=n(null),_=async()=>{r.value=!0,i.value="";const{data:s,error:e}=await V.from("articles").select("*").order("published_at",{ascending:!1});e?i.value=e.message:y.value=s,r.value=!1},A=()=>{x.value=!1,Object.assign(w,{id:null,type:"",title:"",published_at:"",image_url:"",content:[]}),b.push("/articles/edit/new")},D=s=>{x.value=!0,b.push(`/articles/edit/${s.id}`)},h=s=>{g.value=s,u.value=!0},T=async()=>{r.value=!0,i.value="";const{error:s}=await V.from("articles").delete().eq("id",g.value);s&&(i.value=s.message),u.value=!1,_(),r.value=!1};return $(_),(s,e)=>(m(),v("div",U,[o("div",Y,[a(C,{flat:"",class:"py-6 px-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-none border-b border-gray-200"},{default:t(()=>[e[3]||(e[3]=o("div",null,[o("h2",{class:"text-2xl font-bold mb-1"},"Articles Management"),o("p",{class:"text-gray-500 text-base"}," Manage all articles and their details for your website. ")],-1)),a(c,{color:"primary",class:"mt-4 md:mt-0",onClick:A,size:"large","prepend-icon":"tabler-plus"},{default:t(()=>e[2]||(e[2]=[d(" Add Article ")])),_:1})]),_:1})]),i.value?(m(),j(q,{key:0,type:"error",class:"mb-4"},{default:t(()=>[d(p(i.value),1)]),_:1})):E("",!0),a(z,{items:y.value,loading:r.value,class:"rounded-lg shadow",headers:[{title:"Type",key:"type"},{title:"Title",key:"title"},{title:"Published",key:"published_at"},{title:"Created",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],"item-value":"id",density:"comfortable"},{"item.published_at":t(({item:l})=>[o("span",Z,p(l.published_at),1)]),"item.content":t(({item:l})=>[o("ul",G,[(m(!0),v(L,null,S(l.content,(f,B)=>(m(),v("li",{key:B,class:"truncate max-w-xs"},p(f),1))),128))])]),"item.created_at":t(({item:l})=>[o("span",H,p(new Date(l.created_at).toLocaleString()),1)]),"item.actions":t(({item:l})=>[a(c,{icon:"",variant:"text",color:"primary",onClick:f=>D(l)},{default:t(()=>[a(k,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(c,{icon:"",variant:"text",color:"error",onClick:f=>h(l.id)},{default:t(()=>[a(k,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),"no-data":t(()=>e[4]||(e[4]=[o("div",{class:"text-center text-gray-400 py-8"},"No data.",-1)])),_:1},8,["items","loading"]),a(R,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=l=>u.value=l),"max-width":"400"},{default:t(()=>[a(C,null,{default:t(()=>[a(F,null,{default:t(()=>e[5]||(e[5]=[d("Delete Article?")])),_:1}),a(O,null,{default:t(()=>e[6]||(e[6]=[d(" Are you sure you want to delete this article? ")])),_:1}),a(I,null,{default:t(()=>[a(P),a(c,{text:"",onClick:e[0]||(e[0]=l=>u.value=!1)},{default:t(()=>e[7]||(e[7]=[d("Cancel")])),_:1}),a(c,{color:"error",loading:r.value,onClick:T},{default:t(()=>e[8]||(e[8]=[d(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{be as default};
