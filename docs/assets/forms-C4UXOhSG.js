import{a8 as ie,a9 as se,aE as $,b7 as ne,r as p,b8 as re,X as z,aF as de,aa as ue,aH as ce,b as t,q as R,F as K,a_ as me,b9 as fe,Z as L,ba as ve,aD as pe,ao as ke,E as Ve,c as M,o as A,d as f,e as l,t as r,f as be,m as ge,$ as k,v as g,a3 as ye,a0 as h}from"./index-Cs56v0At.js";import{V as j}from"./VAlert-DdpZmKKI.js";import{V as N,b as O,c as H}from"./VCard-DA4IPDsH.js";import{V as Ce}from"./VChip-DMWyfkQi.js";import{V as _e}from"./VDataTable-CE2rUsw4.js";import{V as W}from"./VCardText-DFV2BJbA.js";import{V as xe}from"./VForm-Dr6CSLn8.js";import{u as we,b as X,a as Fe,d as E}from"./VTextField-C4XJx2Dz.js";import{V as Se}from"./VTextarea-DSQ_Dxo0.js";import{a as Z,m as Ae}from"./VSelect-BDhU9j2u.js";import{V as G}from"./VSpacer-S0PcfrqZ.js";import{V as J}from"./VDialog-C5E9XUbD.js";import"./VAvatar-CilbXriq.js";import"./VImg-BZXzfXOW.js";import"./VDivider-CaB5QsUp.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-Bpo7c8Lz.js";import"./ssrBoot-BF_zi78u.js";import"./VOverlay-CAZCCTm0.js";import"./scopeId-Ca3ivWDp.js";import"./VMenu-C8WYHHPj.js";/* empty css              */const he=se({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Fe(),...Ae()},"VSwitch"),De=ie()({name:"VSwitch",inheritAttrs:!1,props:he(),emits:{"update:focused":i=>!0,"update:modelValue":i=>!0,"update:indeterminate":i=>!0},setup(i,d){let{attrs:u,slots:n}=d;const c=$(i,"indeterminate"),m=$(i,"modelValue"),{loaderClasses:V}=ne(i),{isFocused:o,focus:_,blur:y}=we(i),x=p(),w=re&&window.matchMedia("(forced-colors: active)").matches,F=z(()=>typeof i.loading=="string"&&i.loading!==""?i.loading:i.color),D=de(),B=z(()=>i.id||`switch-${D}`);function s(){c.value&&(c.value=!1)}function e(a){var b,S;a.stopPropagation(),a.preventDefault(),(S=(b=x.value)==null?void 0:b.input)==null||S.click()}return ue(()=>{const[a,b]=ce(u),S=X.filterProps(i),Q=Z.filterProps(i);return t(X,R({class:["v-switch",{"v-switch--flat":i.flat},{"v-switch--inset":i.inset},{"v-switch--indeterminate":c.value},V.value,i.class]},a,S,{modelValue:m.value,"onUpdate:modelValue":I=>m.value=I,id:B.value,focused:o.value,style:i.style}),{...n,default:I=>{let{id:Y,messagesId:ee,isDisabled:te,isReadonly:ae,isValid:q}=I;const P={model:m,isValid:q};return t(Z,R({ref:x},Q,{modelValue:m.value,"onUpdate:modelValue":[C=>m.value=C,s],id:Y.value,"aria-describedby":ee.value,type:"checkbox","aria-checked":c.value?"mixed":void 0,disabled:te.value,readonly:ae.value,onFocus:_,onBlur:y},b),{...n,default:C=>{let{backgroundColorClasses:T,backgroundColorStyles:v}=C;return t("div",{class:["v-switch__track",w?void 0:T.value],style:v.value,onClick:e},[n["track-true"]&&t("div",{key:"prepend",class:"v-switch__track-true"},[n["track-true"](P)]),n["track-false"]&&t("div",{key:"append",class:"v-switch__track-false"},[n["track-false"](P)])])},input:C=>{let{inputNode:T,icon:v,backgroundColorClasses:le,backgroundColorStyles:oe}=C;return t(K,null,[T,t("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":v||i.loading},i.inset||w?void 0:le.value],style:i.inset?void 0:oe.value},[n.thumb?t(me,{defaults:{VIcon:{icon:v,size:"x-small"}}},{default:()=>[n.thumb({...P,icon:v})]}):t(fe,null,{default:()=>[i.loading?t(ve,{name:"v-switch",active:!0,color:q.value===!1?void 0:F.value},{default:U=>n.loader?n.loader(U):t(pe,{active:U.isActive,color:U.color,indeterminate:!0,size:"16",width:"2"},null)}):v&&t(L,{key:String(v),icon:v,size:"x-small"},null)]})])])}})}})}),{}}}),Be={class:"p-6"},Ie={class:"mb-8"},Pe={key:0,class:"material-icons"},Te={key:1,class:"text-gray-400"},Ue=["href"],Me={class:"text-xs text-gray-500"},ot={__name:"forms",setup(i){const d=p(!1),u=p(""),n=p([]),c=p(!1),m=p(!1),V=p(!1),o=ke({id:null,icon:"",title:"",link:"",description:"",is_active:!0}),_=p(null),y=async()=>{d.value=!0,u.value="";const{data:s,error:e}=await h.from("forms").select("*").order("created_at",{ascending:!1});e?u.value=e.message:n.value=s,d.value=!1},x=()=>{V.value=!1,Object.assign(o,{id:null,icon:"",title:"",link:"",description:"",is_active:!0}),c.value=!0},w=s=>{V.value=!0,Object.assign(o,s),c.value=!0},F=async()=>{if(!o.title||!o.link){u.value="Title and Link are required";return}d.value=!0,u.value="";let s;V.value?s=await h.from("forms").update({icon:o.icon,title:o.title,link:o.link,description:o.description,is_active:o.is_active}).eq("id",o.id).select():s=await h.from("forms").insert([{icon:o.icon,title:o.title,link:o.link,description:o.description,is_active:o.is_active}]).select(),s.error?u.value=s.error.message:(c.value=!1,y()),d.value=!1},D=s=>{_.value=s,m.value=!0},B=async()=>{d.value=!0,u.value="";const{error:s}=await h.from("forms").delete().eq("id",_.value);s&&(u.value=s.message),m.value=!1,y(),d.value=!1};return Ve(y),(s,e)=>(A(),M(K,null,[t(j,{type:"info",class:"mb-4",variant:"tonal"},{default:l(()=>e[9]||(e[9]=[r(" Untuk memilih ikon, silakan cek daftar nama ikon di "),f("a",{href:"https://tabler.io/icons",target:"_blank",class:"text-primary font-semibold underline"}," https://tabler.io/icons",-1),r(" dan gunakan nama ikon (misal: "),f("code",null,"tabler-user",-1),r("). ")])),_:1}),f("div",Be,[f("div",Ie,[t(N,{flat:"",class:"py-6 px-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-none border-b border-gray-200"},{default:l(()=>[e[11]||(e[11]=f("div",null,[f("h2",{class:"text-2xl font-bold mb-1"},"Forms Management"),f("p",{class:"text-gray-500 text-base"}," Manage all forms and their visibility on your website. ")],-1)),t(k,{color:"primary",class:"mt-4 md:mt-0",onClick:x,size:"large","prepend-icon":"tabler-plus"},{default:l(()=>e[10]||(e[10]=[r(" Add Form ")])),_:1})]),_:1})]),u.value?(A(),be(j,{key:0,type:"error",class:"mb-4"},{default:l(()=>[r(g(u.value),1)]),_:1})):ge("",!0),t(_e,{items:n.value,loading:d.value,class:"rounded-lg shadow",headers:[{title:"Icon",key:"icon"},{title:"Title",key:"title"},{title:"Link",key:"link"},{title:"Active",key:"is_active"},{title:"Created",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],"item-value":"id",density:"comfortable"},{"item.icon":l(({item:a})=>[a.icon?(A(),M("span",Pe,g(a.icon),1)):(A(),M("span",Te,"-"))]),"item.link":l(({item:a})=>[f("a",{href:a.link,target:"_blank",class:"text-primary underline break-all"},g(a.link),9,Ue)]),"item.is_active":l(({item:a})=>[t(Ce,{color:a.is_active?"success":"error",size:"small"},{default:l(()=>[r(g(a.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),"item.created_at":l(({item:a})=>[f("span",Me,g(new Date(a.created_at).toLocaleString()),1)]),"item.actions":l(({item:a})=>[t(k,{icon:"",variant:"text",color:"primary",onClick:b=>w(a)},{default:l(()=>[t(L,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(k,{icon:"",variant:"text",color:"error",onClick:b=>D(a.id)},{default:l(()=>[t(L,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),"no-data":l(()=>e[12]||(e[12]=[f("div",{class:"text-center text-gray-400 py-8"},"No data.",-1)])),_:1},8,["items","loading"]),t(J,{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=a=>c.value=a),"max-width":"500"},{default:l(()=>[t(N,null,{default:l(()=>[t(O,null,{default:l(()=>[r(g(V.value?"Edit Form":"Add Form"),1)]),_:1}),t(W,null,{default:l(()=>[t(xe,{onSubmit:ye(F,["prevent"])},{default:l(()=>[t(E,{modelValue:o.icon,"onUpdate:modelValue":e[0]||(e[0]=a=>o.icon=a),label:"Material Icon Name",class:"mb-4"},null,8,["modelValue"]),t(E,{modelValue:o.title,"onUpdate:modelValue":e[1]||(e[1]=a=>o.title=a),label:"Title",required:"",class:"mb-4"},null,8,["modelValue"]),t(E,{modelValue:o.link,"onUpdate:modelValue":e[2]||(e[2]=a=>o.link=a),label:"Link",required:"",class:"mb-4"},null,8,["modelValue"]),t(Se,{modelValue:o.description,"onUpdate:modelValue":e[3]||(e[3]=a=>o.description=a),label:"Description",class:"mb-4"},null,8,["modelValue"]),t(De,{modelValue:o.is_active,"onUpdate:modelValue":e[4]||(e[4]=a=>o.is_active=a),label:"Active",class:"mb-4"},null,8,["modelValue"])]),_:1})]),_:1}),t(H,null,{default:l(()=>[t(G),t(k,{text:"",onClick:e[5]||(e[5]=a=>c.value=!1)},{default:l(()=>e[13]||(e[13]=[r("Cancel")])),_:1}),t(k,{color:"primary",loading:d.value,onClick:F},{default:l(()=>e[14]||(e[14]=[r(" Save ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(J,{modelValue:m.value,"onUpdate:modelValue":e[8]||(e[8]=a=>m.value=a),"max-width":"400"},{default:l(()=>[t(N,null,{default:l(()=>[t(O,null,{default:l(()=>e[15]||(e[15]=[r("Delete Form?")])),_:1}),t(W,null,{default:l(()=>e[16]||(e[16]=[r(" Are you sure you want to delete this form? ")])),_:1}),t(H,null,{default:l(()=>[t(G),t(k,{text:"",onClick:e[7]||(e[7]=a=>m.value=!1)},{default:l(()=>e[17]||(e[17]=[r("Cancel")])),_:1}),t(k,{color:"error",loading:d.value,onClick:B},{default:l(()=>e[18]||(e[18]=[r(" Delete ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};export{ot as default};
